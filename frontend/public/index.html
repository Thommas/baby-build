<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Path of child</title>
</head>
<body>
  <script type="text/javascript">
    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
    function storageAvailable(type) {
      try {
        var storage = window[type],
          x = '__storage_test__';
        storage.setItem(x, x);
        storage.removeItem(x);
        return true;
      }
      catch(e) {
        return false;
      }
    }

    var locale = 'en';
    if (navigator.browserLanguage) {
        locale = navigator.browserLanguage.substring(0, 2);
    } else if (navigator.language) {
        locale = navigator.language.substring(0, 2);
    }
    if (locale !== 'en' && locale !== 'ja') {
      locale = 'en';
    }

    // Fetch locale from local storage or save current locale
    var localeKey = 'pathofchild_frontend_locale';
    if (storageAvailable('localStorage')) {
      var localeStorage = window.localStorage;
      if (localStorage.getItem(localeKey)) {
        locale = localStorage.getItem(localeKey);
      } else {
        localStorage.setItem(localeKey, locale);
      }
    }

    window.location.href = '/' + locale;
  </script>
</body>
</html>
