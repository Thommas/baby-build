(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./lib/handler.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/dynamo/character.ts":
/*!*********************************!*\
  !*** ./lib/dynamo/character.ts ***!
  \*********************************/
/*! exports provided: getCharacters, getCharactersByIds, createCharacter, updateCharacter, deleteCharacter, addFile, removeFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCharacters\", function() { return getCharacters; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCharactersByIds\", function() { return getCharactersByIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createCharacter\", function() { return createCharacter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateCharacter\", function() { return updateCharacter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteCharacter\", function() { return deleteCharacter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addFile\", function() { return addFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeFile\", function() { return removeFile; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _elasticsearch_character__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../elasticsearch/character */ \"./lib/elasticsearch/character.ts\");\n/* harmony import */ var _elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../elasticsearch/sharing */ \"./lib/elasticsearch/sharing.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\n\n\n\nfunction getCharacters(userId, args) {\n    const characterInput = args.characterInput;\n    const page = args.page;\n    const sort = args.sort;\n    return Object(_elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_3__[\"querySharingsByUserId\"])(userId)\n        .then((sharings) => {\n        const userIds = sharings.hits.hits.map((hit) => hit._source.sharerId);\n        userIds.push(userId);\n        return Object(_elasticsearch_character__WEBPACK_IMPORTED_MODULE_2__[\"queryCharacters\"])(userIds, characterInput, sort, page);\n    })\n        .then((characters) => {\n        if (0 === characters.hits.total.value || 0 === characters.hits.hits.length) {\n            return {\n                total: 0,\n                page: 1,\n                nodes: [],\n            };\n        }\n        const params = characters.hits.hits.map((hit) => ({ id: hit._id }));\n        return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().batchGet(params).then((items) => {\n            return {\n                total: characters.hits.total.value,\n                page,\n                nodes: Object(lodash__WEBPACK_IMPORTED_MODULE_1__[\"orderBy\"])(items, [\n                    (item) => new Date(item.createdAt),\n                    'id',\n                ], [\n                    'desc',\n                    'asc',\n                ]),\n            };\n        });\n    });\n}\nfunction getCharactersByIds(ids) {\n    if (!ids || 0 === ids.length) {\n        return [];\n    }\n    const params = ids.map((id) => ({ id }));\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().batchGet(params);\n}\nfunction createCharacter(args, userId) {\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity();\n    const entity = new Entity(Object.assign({ id: `Character-${id}`, userId, imgsReady: false }, args));\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n}\nfunction updateCharacter(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Character not found');\n        }\n        Object.assign(entity, args);\n        for (const field in entity) {\n            if (entity[field] === null) {\n                delete entity[field];\n            }\n        }\n        entity.imgsReady = false;\n        return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n    });\n}\nfunction deleteCharacter(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Character not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        return entity.delete();\n    });\n}\nfunction addFile(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Character not found');\n        }\n        const Entity = _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity();\n        const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n        const newFile = new Entity({\n            id: `File-${id}`,\n            userId,\n            name: args.name,\n            size: args.size,\n            type: args.type,\n            data: args.data,\n        });\n        return newFile.save().then((file) => {\n            if (!entity.files) {\n                entity.files = [];\n            }\n            entity.files.push(file.id);\n            return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n        });\n    });\n}\nfunction removeFile(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Character not found');\n        }\n        entity.files = entity.files.filter((fileId) => fileId !== args.fileId);\n        console.log('entity.files', entity.files);\n        return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL2NoYXJhY3Rlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9keW5hbW8vY2hhcmFjdGVyLnRzP2I1ODQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJ1xuaW1wb3J0IHsgb3JkZXJCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBxdWVyeUNoYXJhY3RlcnMgfSBmcm9tICcuLi9lbGFzdGljc2VhcmNoL2NoYXJhY3Rlcic7XG5pbXBvcnQgeyBxdWVyeVNoYXJpbmdzQnlVc2VySWQgfSBmcm9tICcuLi9lbGFzdGljc2VhcmNoL3NoYXJpbmcnO1xuaW1wb3J0IHsgZHluYW1vU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoYXJhY3RlcnModXNlcklkOiBzdHJpbmcsIGFyZ3M6IGFueSkge1xuICBjb25zdCBjaGFyYWN0ZXJJbnB1dCA9IGFyZ3MuY2hhcmFjdGVySW5wdXQ7XG4gIGNvbnN0IHBhZ2UgPSBhcmdzLnBhZ2U7XG4gIGNvbnN0IHNvcnQgPSBhcmdzLnNvcnQ7XG4gIHJldHVybiBxdWVyeVNoYXJpbmdzQnlVc2VySWQodXNlcklkKVxuICAgIC50aGVuKChzaGFyaW5ncykgPT4ge1xuICAgICAgY29uc3QgdXNlcklkcyA9IHNoYXJpbmdzLmhpdHMuaGl0cy5tYXAoKGhpdDogYW55KSA9PiBoaXQuX3NvdXJjZS5zaGFyZXJJZCk7XG4gICAgICB1c2VySWRzLnB1c2godXNlcklkKTtcbiAgICAgIHJldHVybiBxdWVyeUNoYXJhY3RlcnModXNlcklkcywgY2hhcmFjdGVySW5wdXQsIHNvcnQsIHBhZ2UpXG4gICAgfSlcbiAgICAudGhlbigoY2hhcmFjdGVycykgPT4ge1xuICAgICAgaWYgKDAgPT09IGNoYXJhY3RlcnMuaGl0cy50b3RhbC52YWx1ZSB8fCAwID09PSBjaGFyYWN0ZXJzLmhpdHMuaGl0cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIG5vZGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmFtczogYW55ID0gY2hhcmFjdGVycy5oaXRzLmhpdHMubWFwKChoaXQ6IGFueSkgPT4gKHtpZDogaGl0Ll9pZH0pKTtcbiAgICAgIHJldHVybiBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpLmJhdGNoR2V0KHBhcmFtcykudGhlbigoaXRlbXM6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvdGFsOiBjaGFyYWN0ZXJzLmhpdHMudG90YWwudmFsdWUsXG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBub2Rlczogb3JkZXJCeShpdGVtcywgW1xuICAgICAgICAgICAgKGl0ZW06IGFueSkgPT4gbmV3IERhdGUoaXRlbS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgJ2lkJyxcbiAgICAgICAgICBdLCBbXG4gICAgICAgICAgICAnZGVzYycsXG4gICAgICAgICAgICAnYXNjJyxcbiAgICAgICAgICBdKSxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoYXJhY3RlcnNCeUlkcyhpZHM6IHN0cmluZ1tdKSB7XG4gIGlmICghaWRzIHx8IDAgPT09IGlkcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBwYXJhbXM6IGFueSA9IGlkcy5tYXAoKGlkOiBhbnkpID0+ICh7IGlkIH0pKTtcblxuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhcmFjdGVyKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgY29uc3QgRW50aXR5ID0gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKTtcbiAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eSh7XG4gICAgaWQ6IGBDaGFyYWN0ZXItJHtpZH1gLFxuICAgIHVzZXJJZCxcbiAgICBpbWdzUmVhZHk6IGZhbHNlLFxuICAgIC4uLmFyZ3NcbiAgfSk7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNoYXJhY3RlcihhcmdzOiBhbnksIHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpLmdldChhcmdzLmlkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFyYWN0ZXIgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICAvLyBGSVhNRSBOZWVkIHRvIGNoZWNrIHNoYXJpbmcgcGVybWlzc2lvblxuICAgICAgLy8gaWYgKGVudGl0eS51c2VySWQgIT09IHVzZXJJZCkge1xuICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgLy8gfVxuICAgICAgT2JqZWN0LmFzc2lnbihlbnRpdHksIGFyZ3MpO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBpbiBlbnRpdHkpIHtcbiAgICAgICAgaWYgKGVudGl0eVtmaWVsZF0gPT09IG51bGwpIHtcbiAgICAgICAgICBkZWxldGUgZW50aXR5W2ZpZWxkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZW50aXR5LmltZ3NSZWFkeSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2hhcmFjdGVyKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KGFyZ3MuaWQpXG4gICAgLnRoZW4oKGVudGl0eTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbnRpdHkudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnRpdHkuZGVsZXRlKCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGaWxlKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KGFyZ3MuaWQpXG4gICAgLnRoZW4oKGVudGl0eTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIC8vIEZJWE1FIE5lZWQgdG8gY2hlY2sgc2hhcmluZyBwZXJtaXNzaW9uXG4gICAgICAvLyBpZiAoZW50aXR5LnVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICAvLyB9XG4gICAgICBjb25zdCBFbnRpdHkgPSBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpO1xuICAgICAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgICAgIGNvbnN0IG5ld0ZpbGUgPSBuZXcgRW50aXR5KHtcbiAgICAgICAgaWQ6IGBGaWxlLSR7aWR9YCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBuYW1lOiBhcmdzLm5hbWUsXG4gICAgICAgIHNpemU6IGFyZ3Muc2l6ZSxcbiAgICAgICAgdHlwZTogYXJncy50eXBlLFxuICAgICAgICBkYXRhOiBhcmdzLmRhdGEsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdGaWxlLnNhdmUoKS50aGVuKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKCFlbnRpdHkuZmlsZXMpIHtcbiAgICAgICAgICBlbnRpdHkuZmlsZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHkuZmlsZXMucHVzaChmaWxlLmlkKTtcbiAgICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xuICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KGFyZ3MuaWQpXG4gICAgLnRoZW4oKGVudGl0eTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXJhY3RlciBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIC8vIEZJWE1FIE5lZWQgdG8gY2hlY2sgc2hhcmluZyBwZXJtaXNzaW9uXG4gICAgICAvLyBpZiAoZW50aXR5LnVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIEZJWE1FXG4gICAgICAvLyBjb25zdCBmaWxlcyA9IGVudGl0eS5maWxlcy5maWx0ZXIoKGZpbGVJZDogc3RyaW5nKSA9PiBmaWxlSWQgPT09IGFyZ3MuZmlsZUlkKTtcbiAgICAgIC8vIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIC8vICAgZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoZmlsZXNbMF0pLnRoZW4oKGZpbGUpID0+IHtcbiAgICAgIC8vICAgICBpZiAoZmlsZSkge1xuICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ0ZPVU5EIEZJTEUgVE8gREVMRVRFJyk7XG4gICAgICAvLyAgICAgICBmaWxlLmRlbGV0ZSgpO1xuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSk7XG4gICAgICAvLyB9XG5cbiAgICAgIGVudGl0eS5maWxlcyA9IGVudGl0eS5maWxlcy5maWx0ZXIoKGZpbGVJZDogc3RyaW5nKSA9PiBmaWxlSWQgIT09IGFyZ3MuZmlsZUlkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdlbnRpdHkuZmlsZXMnLCBlbnRpdHkuZmlsZXMpO1xuICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xuICAgIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/dynamo/character.ts\n");

/***/ }),

/***/ "./lib/dynamo/file.ts":
/*!****************************!*\
  !*** ./lib/dynamo/file.ts ***!
  \****************************/
/*! exports provided: createFile, getFilesByIds, getFiles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createFile\", function() { return createFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getFilesByIds\", function() { return getFilesByIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getFiles\", function() { return getFiles; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\nfunction createFile(args, userId) {\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity();\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const newFile = new Entity({\n        id: `File-${id}`,\n        userId,\n        name: args.name,\n        size: args.size,\n        type: args.type,\n        data: args.data,\n    });\n    return newFile.save();\n}\nfunction getFilesByIds(ids) {\n    if (!ids || 0 === ids.length) {\n        return [];\n    }\n    const params = ids.map((id) => ({ id }));\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().batchGet(params);\n}\nfunction getFiles(args) {\n    console.log('args', args);\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"puppeteerService\"].getFiles(args.fileInput.input);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL2ZpbGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZHluYW1vL2ZpbGUudHM/OWNkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnXG5pbXBvcnQgeyBkeW5hbW9TZXJ2aWNlLCBwdXBwZXRlZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmlsZShhcmdzOiBhbnksIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IEVudGl0eSA9IGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCk7XG4gIGNvbnN0IGlkID0gbmFub2lkKCk7XG4gIGNvbnN0IG5ld0ZpbGUgPSBuZXcgRW50aXR5KHtcbiAgICBpZDogYEZpbGUtJHtpZH1gLFxuICAgIHVzZXJJZCxcbiAgICBuYW1lOiBhcmdzLm5hbWUsXG4gICAgc2l6ZTogYXJncy5zaXplLFxuICAgIHR5cGU6IGFyZ3MudHlwZSxcbiAgICBkYXRhOiBhcmdzLmRhdGEsXG4gIH0pO1xuICByZXR1cm4gbmV3RmlsZS5zYXZlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlc0J5SWRzKGlkcz86IHN0cmluZ1tdKSB7XG4gIGlmICghaWRzIHx8IDAgPT09IGlkcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgcGFyYW1zID0gaWRzLm1hcCgoaWQ6IHN0cmluZykgPT4gKHsgaWQgfSkpO1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZXMoYXJnczogYW55KSB7XG4gIGNvbnNvbGUubG9nKCdhcmdzJywgYXJncyk7XG4gIHJldHVybiBwdXBwZXRlZXJTZXJ2aWNlLmdldEZpbGVzKGFyZ3MuZmlsZUlucHV0LmlucHV0KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/dynamo/file.ts\n");

/***/ }),

/***/ "./lib/dynamo/idea.ts":
/*!****************************!*\
  !*** ./lib/dynamo/idea.ts ***!
  \****************************/
/*! exports provided: getIdeas, getIdeasByIds, createIdea, updateIdea, deleteIdea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getIdeas\", function() { return getIdeas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getIdeasByIds\", function() { return getIdeasByIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createIdea\", function() { return createIdea; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateIdea\", function() { return updateIdea; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteIdea\", function() { return deleteIdea; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _elasticsearch_idea__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../elasticsearch/idea */ \"./lib/elasticsearch/idea.ts\");\n/* harmony import */ var _elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../elasticsearch/sharing */ \"./lib/elasticsearch/sharing.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\n\n\n\nfunction getIdeas(userId, args) {\n    const ideaInput = args.ideaInput;\n    const page = args.page;\n    const sort = args.sort;\n    return Object(_elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_3__[\"querySharingsByUserId\"])(userId)\n        .then((sharings) => {\n        const userIds = sharings.hits.hits.map((hit) => hit._source.sharerId);\n        userIds.push(userId);\n        return Object(_elasticsearch_idea__WEBPACK_IMPORTED_MODULE_2__[\"queryIdeas\"])(userIds, ideaInput, sort, page);\n    })\n        .then((ideas) => {\n        if (0 === ideas.hits.total.value || 0 === ideas.hits.hits.length) {\n            return {\n                total: 0,\n                page,\n                nodes: [],\n            };\n        }\n        const params = ideas.hits.hits.map((hit) => ({ id: hit._id }));\n        return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().batchGet(params).then((items) => {\n            return {\n                total: ideas.hits.total.value,\n                page,\n                nodes: Object(lodash__WEBPACK_IMPORTED_MODULE_1__[\"orderBy\"])(items, [\n                    (item) => new Date(item.createdAt),\n                    'id',\n                ], [\n                    'desc',\n                    'asc',\n                ]),\n            };\n        });\n    });\n}\nfunction getIdeasByIds(ids) {\n    if (!ids || 0 === ids.length) {\n        return [];\n    }\n    const params = ids.map((id) => ({ id }));\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().batchGet(params);\n}\nfunction createIdea(args, userId) {\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity();\n    const entity = new Entity(Object.assign({ id: `Idea-${id}`, userId, imgsReady: false }, args));\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n}\nfunction updateIdea(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Idea not found');\n        }\n        Object.assign(entity, args);\n        for (const field in entity) {\n            if (entity[field] === null) {\n                delete entity[field];\n            }\n        }\n        entity.imgsReady = false;\n        return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].persist(entity);\n    });\n}\nfunction deleteIdea(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_4__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Idea not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        return entity.delete();\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL2lkZWEudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZHluYW1vL2lkZWEudHM/MzM3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnXG5pbXBvcnQgeyBvcmRlckJ5IH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHF1ZXJ5SWRlYXMgfSBmcm9tICcuLi9lbGFzdGljc2VhcmNoL2lkZWEnO1xuaW1wb3J0IHsgcXVlcnlTaGFyaW5nc0J5VXNlcklkIH0gZnJvbSAnLi4vZWxhc3RpY3NlYXJjaC9zaGFyaW5nJztcbmltcG9ydCB7IGR5bmFtb1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZGVhcyh1c2VySWQ6IHN0cmluZywgYXJnczogYW55KSB7XG4gIGNvbnN0IGlkZWFJbnB1dCA9IGFyZ3MuaWRlYUlucHV0O1xuICBjb25zdCBwYWdlID0gYXJncy5wYWdlO1xuICBjb25zdCBzb3J0ID0gYXJncy5zb3J0O1xuICByZXR1cm4gcXVlcnlTaGFyaW5nc0J5VXNlcklkKHVzZXJJZClcbiAgICAudGhlbigoc2hhcmluZ3MpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJJZHMgPSBzaGFyaW5ncy5oaXRzLmhpdHMubWFwKChoaXQ6IGFueSkgPT4gaGl0Ll9zb3VyY2Uuc2hhcmVySWQpO1xuICAgICAgdXNlcklkcy5wdXNoKHVzZXJJZCk7XG4gICAgICByZXR1cm4gcXVlcnlJZGVhcyh1c2VySWRzLCBpZGVhSW5wdXQsIHNvcnQsIHBhZ2UpXG4gICAgfSlcbiAgICAudGhlbigoaWRlYXMpID0+IHtcbiAgICAgIGlmICgwID09PSBpZGVhcy5oaXRzLnRvdGFsLnZhbHVlIHx8IDAgPT09IGlkZWFzLmhpdHMuaGl0cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICBwYWdlLFxuICAgICAgICAgIG5vZGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmFtczogYW55ID0gaWRlYXMuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+ICh7aWQ6IGhpdC5faWR9KSk7XG4gICAgICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpLnRoZW4oKGl0ZW1zOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3RhbDogaWRlYXMuaGl0cy50b3RhbC52YWx1ZSxcbiAgICAgICAgICBwYWdlLFxuICAgICAgICAgIG5vZGVzOiBvcmRlckJ5KGl0ZW1zLCBbXG4gICAgICAgICAgICAoaXRlbTogYW55KSA9PiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICAnaWQnLFxuICAgICAgICAgIF0sIFtcbiAgICAgICAgICAgICdkZXNjJyxcbiAgICAgICAgICAgICdhc2MnLFxuICAgICAgICAgIF0pLFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRlYXNCeUlkcyhpZHM6IHN0cmluZ1tdKSB7XG4gIGlmICghaWRzIHx8IDAgPT09IGlkcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBwYXJhbXM6IGFueSA9IGlkcy5tYXAoKGlkOiBhbnkpID0+ICh7IGlkIH0pKTtcblxuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWRlYShhcmdzOiBhbnksIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGlkID0gbmFub2lkKCk7XG4gIGNvbnN0IEVudGl0eSA9IGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCk7XG4gIGNvbnN0IGVudGl0eSA9IG5ldyBFbnRpdHkoe1xuICAgIGlkOiBgSWRlYS0ke2lkfWAsXG4gICAgdXNlcklkLFxuICAgIGltZ3NSZWFkeTogZmFsc2UsXG4gICAgLi4uYXJnc1xuICB9KTtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlSWRlYShhcmdzOiBhbnksIHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpLmdldChhcmdzLmlkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZGVhIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgLy8gRklYTUUgTmVlZCB0byBjaGVjayBzaGFyaW5nIHBlcm1pc3Npb25cbiAgICAgIC8vIGlmIChlbnRpdHkudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgIC8vIH1cbiAgICAgIE9iamVjdC5hc3NpZ24oZW50aXR5LCBhcmdzKTtcbiAgICAgIGZvciAoY29uc3QgZmllbGQgaW4gZW50aXR5KSB7XG4gICAgICAgIGlmIChlbnRpdHlbZmllbGRdID09PSBudWxsKSB7XG4gICAgICAgICAgZGVsZXRlIGVudGl0eVtmaWVsZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVudGl0eS5pbWdzUmVhZHkgPSBmYWxzZTtcbiAgICAgIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUlkZWEoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoYXJncy5pZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSWRlYSBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbnRpdHkudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnRpdHkuZGVsZXRlKCk7XG4gICAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/dynamo/idea.ts\n");

/***/ }),

/***/ "./lib/dynamo/review.ts":
/*!******************************!*\
  !*** ./lib/dynamo/review.ts ***!
  \******************************/
/*! exports provided: getReviews, createReview, updateReview */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getReviews\", function() { return getReviews; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createReview\", function() { return createReview; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateReview\", function() { return updateReview; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _elasticsearch_review__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../elasticsearch/review */ \"./lib/elasticsearch/review.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\n\nfunction getReviews(ideaId) {\n    return Object(_elasticsearch_review__WEBPACK_IMPORTED_MODULE_1__[\"queryReviews\"])(ideaId).then((reviews) => {\n        const params = reviews.hits.hits.map((hit) => ({ id: hit._id }));\n        if (params.length === 0) {\n            return [];\n        }\n        return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity().batchGet(params);\n    });\n}\nfunction createReview(args, userId) {\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity();\n    const entity = new Entity(Object.assign({ id: `Review-${id}`, userId }, args));\n    return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].persist(entity);\n}\nfunction updateReview(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Idea not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        Object.assign(entity, args);\n        return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].persist(entity);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL3Jldmlldy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9keW5hbW8vcmV2aWV3LnRzP2YxN2MiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJ1xuaW1wb3J0IHsgcXVlcnlSZXZpZXdzIH0gZnJvbSAnLi4vZWxhc3RpY3NlYXJjaC9yZXZpZXcnO1xuaW1wb3J0IHsgZHluYW1vU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJldmlld3MoaWRlYUlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHF1ZXJ5UmV2aWV3cyhpZGVhSWQpLnRoZW4oKHJldmlld3MpID0+IHtcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHJldmlld3MuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+ICh7aWQ6IGhpdC5faWR9KSk7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuYmF0Y2hHZXQocGFyYW1zKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXZpZXcoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBpZCA9IG5hbm9pZCgpO1xuICBjb25zdCBFbnRpdHkgPSBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpO1xuICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5KHtcbiAgICBpZDogYFJldmlldy0ke2lkfWAsXG4gICAgdXNlcklkLFxuICAgIC4uLmFyZ3NcbiAgfSk7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJldmlldyhhcmdzOiBhbnksIHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpLmdldChhcmdzLmlkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZGVhIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgaWYgKGVudGl0eS51c2VySWQgIT09IHVzZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmFzc2lnbihlbnRpdHksIGFyZ3MpO1xuICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xuICAgIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/dynamo/review.ts\n");

/***/ }),

/***/ "./lib/dynamo/sharing.ts":
/*!*******************************!*\
  !*** ./lib/dynamo/sharing.ts ***!
  \*******************************/
/*! exports provided: getSharings, createSharing, deleteSharing */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSharings\", function() { return getSharings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createSharing\", function() { return createSharing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteSharing\", function() { return deleteSharing; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../elasticsearch/sharing */ \"./lib/elasticsearch/sharing.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\n\nfunction getSharings(sharerId) {\n    return Object(_elasticsearch_sharing__WEBPACK_IMPORTED_MODULE_1__[\"querySharingsBySharerId\"])(sharerId)\n        .then((sharings) => {\n        const params = sharings.hits.hits.map((hit) => ({ id: hit._id }));\n        if (params.length === 0) {\n            return [];\n        }\n        return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity().batchGet(params);\n    });\n}\nfunction createSharing(args, userId) {\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity();\n    const entity = new Entity({\n        id: `Sharing-${id}`,\n        sharerId: userId,\n        userId: args.userId,\n    });\n    return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].persist(entity);\n}\nfunction deleteSharing(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('Sharing not found');\n        }\n        if (entity.sharerId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        return entity.delete();\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL3NoYXJpbmcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZHluYW1vL3NoYXJpbmcudHM/YTZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnXG5pbXBvcnQgeyBxdWVyeVNoYXJpbmdzQnlTaGFyZXJJZCB9IGZyb20gJy4uL2VsYXN0aWNzZWFyY2gvc2hhcmluZyc7XG5pbXBvcnQgeyBkeW5hbW9TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcmluZ3Moc2hhcmVySWQ6IHN0cmluZykge1xuICByZXR1cm4gcXVlcnlTaGFyaW5nc0J5U2hhcmVySWQoc2hhcmVySWQpXG4gICAgLnRoZW4oKHNoYXJpbmdzKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGFueSA9IHNoYXJpbmdzLmhpdHMuaGl0cy5tYXAoKGhpdDogYW55KSA9PiAoe2lkOiBoaXQuX2lkfSkpO1xuICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuYmF0Y2hHZXQocGFyYW1zKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNoYXJpbmcoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBpZCA9IG5hbm9pZCgpO1xuICBjb25zdCBFbnRpdHkgPSBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpO1xuICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5KHtcbiAgICBpZDogYFNoYXJpbmctJHtpZH1gLFxuICAgIHNoYXJlcklkOiB1c2VySWQsXG4gICAgdXNlcklkOiBhcmdzLnVzZXJJZCxcbiAgfSk7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVNoYXJpbmcoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoYXJncy5pZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2hhcmluZyBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbnRpdHkuc2hhcmVySWQgIT09IHVzZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVudGl0eS5kZWxldGUoKTtcbiAgICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/dynamo/sharing.ts\n");

/***/ }),

/***/ "./lib/dynamo/user.ts":
/*!****************************!*\
  !*** ./lib/dynamo/user.ts ***!
  \****************************/
/*! exports provided: getAuthUser, getUsers, getUser, updateUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAuthUser\", function() { return getAuthUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUsers\", function() { return getUsers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUser\", function() { return getUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateUser\", function() { return updateUser; });\n/* harmony import */ var _elasticsearch_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../elasticsearch/user */ \"./lib/elasticsearch/user.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\nfunction getAuthUser(userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().get(userId)\n        .then((entity) => {\n        if (!entity) {\n            const Entity = _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity();\n            entity = new Entity({\n                type: 'user',\n                id: userId,\n                xp: 0,\n                lvl: 1,\n            });\n            return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].persist(entity);\n        }\n        return entity;\n    });\n}\nfunction getUsers(args) {\n    return Object(_elasticsearch_user__WEBPACK_IMPORTED_MODULE_0__[\"queryUsersBySearchQuery\"])(args.searchQuery)\n        .then((entities) => {\n        const params = entities.hits.hits.map((hit) => ({ id: hit._id }));\n        if (params.length === 0) {\n            return [];\n        }\n        return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().batchGet(params);\n    });\n}\nfunction getUser(userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().get(userId)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('User not found');\n        }\n        return entity;\n    });\n}\nfunction updateUser(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().get(userId)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('User not found');\n        }\n        entity.firstName = args.firstName;\n        entity.lastName = args.lastName;\n        return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].persist(entity);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL3VzZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZHluYW1vL3VzZXIudHM/NTM4NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBxdWVyeVVzZXJzQnlTZWFyY2hRdWVyeSB9IGZyb20gJy4uL2VsYXN0aWNzZWFyY2gvdXNlcic7XG5pbXBvcnQgeyBkeW5hbW9TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aFVzZXIodXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KHVzZXJJZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIGNvbnN0IEVudGl0eSA9IGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCk7XG4gICAgICAgIGVudGl0eSA9IG5ldyBFbnRpdHkoe1xuICAgICAgICAgIHR5cGU6ICd1c2VyJyxcbiAgICAgICAgICBpZDogdXNlcklkLFxuICAgICAgICAgIHhwOiAwLFxuICAgICAgICAgIGx2bDogMSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VycyhhcmdzOiBhbnkpIHtcbiAgcmV0dXJuIHF1ZXJ5VXNlcnNCeVNlYXJjaFF1ZXJ5KGFyZ3Muc2VhcmNoUXVlcnkpXG4gICAgLnRoZW4oKGVudGl0aWVzOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogYW55ID0gZW50aXRpZXMuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+ICh7aWQ6IGhpdC5faWR9KSk7XG4gICAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlcih1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQodXNlcklkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQodXNlcklkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgZW50aXR5LmZpcnN0TmFtZSA9IGFyZ3MuZmlyc3ROYW1lO1xuICAgICAgZW50aXR5Lmxhc3ROYW1lID0gYXJncy5sYXN0TmFtZTtcbiAgICAgIHJldHVybiBkeW5hbW9TZXJ2aWNlLnBlcnNpc3QoZW50aXR5KTtcbiAgICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/dynamo/user.ts\n");

/***/ }),

/***/ "./lib/dynamo/world.ts":
/*!*****************************!*\
  !*** ./lib/dynamo/world.ts ***!
  \*****************************/
/*! exports provided: getWorld, getWorlds, createWorld, updateWorld, deleteWorld, addCharacter, removeCharacter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getWorld\", function() { return getWorld; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getWorlds\", function() { return getWorlds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createWorld\", function() { return createWorld; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateWorld\", function() { return updateWorld; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteWorld\", function() { return deleteWorld; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addCharacter\", function() { return addCharacter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeCharacter\", function() { return removeCharacter; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _elasticsearch_world__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../elasticsearch/world */ \"./lib/elasticsearch/world.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\n\n\nfunction getWorld(userId, args) {\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('World not found');\n        }\n        return entity;\n    });\n}\nfunction getWorlds(userId, args) {\n    const worldInput = args.worldInput;\n    const page = args.page;\n    const sort = args.sort;\n    return Object(_elasticsearch_world__WEBPACK_IMPORTED_MODULE_2__[\"queryWorlds\"])([userId], worldInput, sort, page)\n        .then((worlds) => {\n        if (0 === worlds.hits.total.value || 0 === worlds.hits.hits.length) {\n            return {\n                total: 0,\n                page: 1,\n                nodes: [],\n            };\n        }\n        const params = worlds.hits.hits.map((hit) => ({ id: hit._id }));\n        return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().batchGet(params).then((items) => {\n            return {\n                total: worlds.hits.total.value,\n                page: 1,\n                nodes: Object(lodash__WEBPACK_IMPORTED_MODULE_1__[\"orderBy\"])(items, [\n                    (item) => new Date(item.createdAt),\n                    'id',\n                ], [\n                    'desc',\n                    'asc',\n                ]),\n            };\n        });\n    });\n}\nfunction createWorld(args, userId) {\n    const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n    const Entity = _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity();\n    const entity = new Entity(Object.assign({ id: `World-${id}`, userId, imgsReady: false }, args));\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].persist(entity);\n}\nfunction updateWorld(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('World not found');\n        }\n        Object.assign(entity, args);\n        entity.imgsReady = false;\n        return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].persist(entity);\n    });\n}\nfunction deleteWorld(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('World not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        return entity.delete();\n    });\n}\nfunction addCharacter(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('World not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        if (!entity.characters) {\n            entity.characters = [];\n        }\n        if (-1 === entity.characters.indexOf(args.characterId)) {\n            entity.characters.push(args.characterId);\n        }\n        return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].persist(entity);\n    });\n}\nfunction removeCharacter(args, userId) {\n    return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].getEntity().get(args.id)\n        .then((entity) => {\n        if (!entity) {\n            throw new Error('World not found');\n        }\n        if (entity.userId !== userId) {\n            throw new Error('Unauthorized');\n        }\n        if (!entity.characters) {\n            entity.characters = [];\n        }\n        const index = entity.characters.indexOf(args.characterId);\n        if (-1 !== index) {\n            entity.characters.splice(index, 1);\n        }\n        return _services__WEBPACK_IMPORTED_MODULE_3__[\"dynamoService\"].persist(entity);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZHluYW1vL3dvcmxkLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2R5bmFtby93b3JsZC50cz9kYzU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCdcbmltcG9ydCB7IG9yZGVyQnkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgcXVlcnlXb3JsZHMgfSBmcm9tICcuLi9lbGFzdGljc2VhcmNoL3dvcmxkJztcbmltcG9ydCB7IGR5bmFtb1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXb3JsZCh1c2VySWQ6IHN0cmluZywgYXJnczogYW55KSB7XG4gIHJldHVybiBkeW5hbW9TZXJ2aWNlLmdldEVudGl0eSgpLmdldChhcmdzLmlkKVxuICAgIC50aGVuKChlbnRpdHk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3JsZCBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIC8vIEZJWE1FIE5lZWQgdG8gY2hlY2sgc2hhcmluZyBwZXJtaXNzaW9uXG4gICAgICAvLyBpZiAoZW50aXR5LnVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICAvLyB9XG4gICAgICByZXR1cm4gZW50aXR5O1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ybGRzKHVzZXJJZDogc3RyaW5nLCBhcmdzOiBhbnkpIHtcbiAgY29uc3Qgd29ybGRJbnB1dCA9IGFyZ3Mud29ybGRJbnB1dDtcbiAgY29uc3QgcGFnZSA9IGFyZ3MucGFnZTtcbiAgY29uc3Qgc29ydCA9IGFyZ3Muc29ydDtcbiAgcmV0dXJuIHF1ZXJ5V29ybGRzKFt1c2VySWRdLCB3b3JsZElucHV0LCBzb3J0LCBwYWdlKVxuICAgIC50aGVuKCh3b3JsZHMpID0+IHtcbiAgICAgIGlmICgwID09PSB3b3JsZHMuaGl0cy50b3RhbC52YWx1ZSB8fCAwID09PSB3b3JsZHMuaGl0cy5oaXRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbm9kZXM6IFtdLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyYW1zOiBhbnkgPSB3b3JsZHMuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+ICh7aWQ6IGhpdC5faWR9KSk7XG4gICAgICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5iYXRjaEdldChwYXJhbXMpLnRoZW4oKGl0ZW1zOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3RhbDogd29ybGRzLmhpdHMudG90YWwudmFsdWUsXG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBub2Rlczogb3JkZXJCeShpdGVtcywgW1xuICAgICAgICAgICAgKGl0ZW06IGFueSkgPT4gbmV3IERhdGUoaXRlbS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgJ2lkJyxcbiAgICAgICAgICBdLCBbXG4gICAgICAgICAgICAnZGVzYycsXG4gICAgICAgICAgICAnYXNjJyxcbiAgICAgICAgICBdKSxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdvcmxkKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgY29uc3QgRW50aXR5ID0gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKTtcbiAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eSh7XG4gICAgaWQ6IGBXb3JsZC0ke2lkfWAsXG4gICAgdXNlcklkLFxuICAgIGltZ3NSZWFkeTogZmFsc2UsXG4gICAgLi4uYXJnc1xuICB9KTtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlV29ybGQoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoYXJncy5pZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ybGQgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICAvLyBGSVhNRSBOZWVkIHRvIGNoZWNrIHNoYXJpbmcgcGVybWlzc2lvblxuICAgICAgLy8gaWYgKGVudGl0eS51c2VySWQgIT09IHVzZXJJZCkge1xuICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgLy8gfVxuICAgICAgT2JqZWN0LmFzc2lnbihlbnRpdHksIGFyZ3MpO1xuICAgICAgZW50aXR5LmltZ3NSZWFkeSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGR5bmFtb1NlcnZpY2UucGVyc2lzdChlbnRpdHkpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlV29ybGQoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoYXJncy5pZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ybGQgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICBpZiAoZW50aXR5LnVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW50aXR5LmRlbGV0ZSgpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2hhcmFjdGVyKGFyZ3M6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KGFyZ3MuaWQpXG4gICAgLnRoZW4oKGVudGl0eTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmxkIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgaWYgKGVudGl0eS51c2VySWQgIT09IHVzZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgICAgaWYgKCFlbnRpdHkuY2hhcmFjdGVycykge1xuICAgICAgICBlbnRpdHkuY2hhcmFjdGVycyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKC0xID09PSBlbnRpdHkuY2hhcmFjdGVycy5pbmRleE9mKGFyZ3MuY2hhcmFjdGVySWQpKSB7XG4gICAgICAgIGVudGl0eS5jaGFyYWN0ZXJzLnB1c2goYXJncy5jaGFyYWN0ZXJJZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZHluYW1vU2VydmljZS5wZXJzaXN0KGVudGl0eSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGFyYWN0ZXIoYXJnczogYW55LCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gZHluYW1vU2VydmljZS5nZXRFbnRpdHkoKS5nZXQoYXJncy5pZClcbiAgICAudGhlbigoZW50aXR5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ybGQgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICBpZiAoZW50aXR5LnVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWVudGl0eS5jaGFyYWN0ZXJzKSB7XG4gICAgICAgIGVudGl0eS5jaGFyYWN0ZXJzID0gW107XG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IGVudGl0eS5jaGFyYWN0ZXJzLmluZGV4T2YoYXJncy5jaGFyYWN0ZXJJZCk7XG4gICAgICBpZiAoLTEgIT09IGluZGV4KSB7XG4gICAgICAgIGVudGl0eS5jaGFyYWN0ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZHluYW1vU2VydmljZS5wZXJzaXN0KGVudGl0eSk7XG4gICAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/dynamo/world.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/character.ts":
/*!****************************************!*\
  !*** ./lib/elasticsearch/character.ts ***!
  \****************************************/
/*! exports provided: queryCharacters */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryCharacters\", function() { return queryCharacters; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nlet SIZE = 10;\nfunction queryCharacters(userIds, filters, sortInput, page) {\n    let count = SIZE;\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        ['type.keyword']: 'Character',\n                    },\n                },\n                {\n                    terms: {\n                        ['userId.keyword']: userIds,\n                    },\n                },\n            ],\n        },\n    };\n    if (filters) {\n        if (filters.count) {\n            count = filters.count;\n        }\n        if (filters.ids && filters.ids.length > 0) {\n            query.bool.must.push({\n                terms: {\n                    id: filters.ids,\n                },\n            });\n        }\n        if (filters.label) {\n            query.bool.must.push({\n                match: {\n                    label: {\n                        query: filters.label,\n                        fuzziness: 2,\n                        prefix_length: 1,\n                    },\n                },\n            });\n        }\n    }\n    if (!sortInput) {\n        sortInput = '-createdAt';\n    }\n    const sortKey = sortInput.replace('-', '');\n    const sortOrder = sortInput[0] === '-' ? 'desc' : 'asc';\n    const sort = {\n        [sortKey]: sortOrder,\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query, sort, count, page);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC9jaGFyYWN0ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZWxhc3RpY3NlYXJjaC9jaGFyYWN0ZXIudHM/MzhhNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBlbGFzdGljU2VhcmNoU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzJztcblxubGV0IFNJWkUgPSAxMDtcblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5Q2hhcmFjdGVycyh1c2VySWRzOiBzdHJpbmdbXSwgZmlsdGVyczogYW55LCBzb3J0SW5wdXQ6IHN0cmluZywgcGFnZTogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgbGV0IGNvdW50ID0gU0laRTtcbiAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICBib29sOiB7XG4gICAgICBtdXN0OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgICBbJ3R5cGUua2V5d29yZCddOiAnQ2hhcmFjdGVyJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGVybXM6IHtcbiAgICAgICAgICAgIFsndXNlcklkLmtleXdvcmQnXTogdXNlcklkcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xuICBpZiAoZmlsdGVycykge1xuICAgIGlmIChmaWx0ZXJzLmNvdW50KSB7XG4gICAgICBjb3VudCA9IGZpbHRlcnMuY291bnQ7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmlkcyAmJiBmaWx0ZXJzLmlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBxdWVyeS5ib29sLm11c3QucHVzaCh7XG4gICAgICAgIHRlcm1zOiB7XG4gICAgICAgICAgaWQ6IGZpbHRlcnMuaWRzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmxhYmVsKSB7XG4gICAgICBxdWVyeS5ib29sLm11c3QucHVzaCh7XG4gICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgIHF1ZXJ5OiBmaWx0ZXJzLmxhYmVsLFxuICAgICAgICAgICAgZnV6emluZXNzOiAyLFxuICAgICAgICAgICAgcHJlZml4X2xlbmd0aDogMSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGlmICghc29ydElucHV0KSB7XG4gICAgc29ydElucHV0ID0gJy1jcmVhdGVkQXQnO1xuICB9XG4gIGNvbnN0IHNvcnRLZXkgPSBzb3J0SW5wdXQucmVwbGFjZSgnLScsICcnKTtcbiAgY29uc3Qgc29ydE9yZGVyID0gc29ydElucHV0WzBdID09PSAnLScgPyAnZGVzYycgOiAnYXNjJztcbiAgY29uc3Qgc29ydDogYW55ID0ge1xuICAgIFtzb3J0S2V5XTogc29ydE9yZGVyLFxuICB9O1xuICByZXR1cm4gZWxhc3RpY1NlYXJjaFNlcnZpY2Uuc2VhcmNoKHF1ZXJ5LCBzb3J0LCBjb3VudCwgcGFnZSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/elasticsearch/character.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/idea.ts":
/*!***********************************!*\
  !*** ./lib/elasticsearch/idea.ts ***!
  \***********************************/
/*! exports provided: queryIdeas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryIdeas\", function() { return queryIdeas; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nlet SIZE = 10;\nfunction queryIdeas(userIds, filters, sortInput, page) {\n    let count = SIZE;\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        ['type.keyword']: 'Idea',\n                    },\n                },\n                {\n                    terms: {\n                        ['userId.keyword']: userIds,\n                    },\n                },\n            ],\n            must_not: [],\n        },\n    };\n    if (filters) {\n        if (filters.count) {\n            count = filters.count;\n        }\n        if (filters.ids && filters.ids.length > 0) {\n            query.bool.must.push({\n                terms: {\n                    id: filters.ids,\n                },\n            });\n        }\n        if (filters.category) {\n            query.bool.must.push({\n                term: {\n                    category: filters.category,\n                },\n            });\n        }\n        if (filters.label) {\n            query.bool.must.push({\n                match: {\n                    label: {\n                        query: filters.label,\n                        fuzziness: 1,\n                        prefix_length: 1,\n                    },\n                },\n            });\n        }\n        if ('hasRequiredAge' in filters) {\n            if (filters.hasRequiredAge) {\n                query.bool.must.push({\n                    exists: {\n                        field: 'requiredAge'\n                    },\n                });\n            }\n            else {\n                query.bool.must_not.push({\n                    exists: {\n                        field: 'requiredAge'\n                    },\n                });\n            }\n        }\n        if (filters.requiredAge) {\n            query.bool.must.push({\n                range: {\n                    requiredAge: {\n                        gte: filters.requiredAge,\n                        lt: filters.requiredAge + 1,\n                    },\n                },\n            });\n        }\n        if ('hasScore' in filters) {\n            if (filters.hasScore) {\n                query.bool.must.push({\n                    exists: {\n                        field: 'score'\n                    },\n                });\n            }\n            else {\n                query.bool.must_not.push({\n                    exists: {\n                        field: 'score'\n                    },\n                });\n            }\n        }\n        if (filters.score) {\n            query.bool.must.push({\n                range: {\n                    score: {\n                        gte: filters.score,\n                        lt: filters.score + 1,\n                    },\n                },\n            });\n        }\n        if (filters.language) {\n            query.bool.must.push({\n                match: {\n                    language: {\n                        query: filters.language,\n                    }\n                },\n            });\n        }\n    }\n    if (!sortInput) {\n        sortInput = '-createdAt';\n    }\n    const sortKey = sortInput.replace('-', '');\n    const sortOrder = sortInput[0] === '-' ? 'desc' : 'asc';\n    const sort = {\n        [sortKey]: sortOrder,\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query, sort, count, page);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC9pZGVhLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2VsYXN0aWNzZWFyY2gvaWRlYS50cz83ODFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IGVsYXN0aWNTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5sZXQgU0laRSA9IDEwO1xuXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlJZGVhcyh1c2VySWRzOiBzdHJpbmdbXSwgZmlsdGVyczogYW55LCBzb3J0SW5wdXQ6IHN0cmluZywgcGFnZTogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgbGV0IGNvdW50ID0gU0laRTtcbiAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICBib29sOiB7XG4gICAgICBtdXN0OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgICBbJ3R5cGUua2V5d29yZCddOiAnSWRlYScsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRlcm1zOiB7XG4gICAgICAgICAgICBbJ3VzZXJJZC5rZXl3b3JkJ106IHVzZXJJZHMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBtdXN0X25vdDogW10sXG4gICAgfSxcbiAgfTtcbiAgaWYgKGZpbHRlcnMpIHtcbiAgICBpZiAoZmlsdGVycy5jb3VudCkge1xuICAgICAgY291bnQgPSBmaWx0ZXJzLmNvdW50O1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5pZHMgJiYgZmlsdGVycy5pZHMubGVuZ3RoID4gMCkge1xuICAgICAgcXVlcnkuYm9vbC5tdXN0LnB1c2goe1xuICAgICAgICB0ZXJtczoge1xuICAgICAgICAgIGlkOiBmaWx0ZXJzLmlkcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5jYXRlZ29yeSkge1xuICAgICAgcXVlcnkuYm9vbC5tdXN0LnB1c2goe1xuICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgY2F0ZWdvcnk6IGZpbHRlcnMuY2F0ZWdvcnksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMubGFiZWwpIHtcbiAgICAgIHF1ZXJ5LmJvb2wubXVzdC5wdXNoKHtcbiAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgcXVlcnk6IGZpbHRlcnMubGFiZWwsXG4gICAgICAgICAgICBmdXp6aW5lc3M6IDEsXG4gICAgICAgICAgICBwcmVmaXhfbGVuZ3RoOiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCdoYXNSZXF1aXJlZEFnZScgaW4gZmlsdGVycykge1xuICAgICAgaWYgKGZpbHRlcnMuaGFzUmVxdWlyZWRBZ2UpIHtcbiAgICAgICAgcXVlcnkuYm9vbC5tdXN0LnB1c2goe1xuICAgICAgICAgIGV4aXN0czoge1xuICAgICAgICAgICAgZmllbGQ6ICdyZXF1aXJlZEFnZSdcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5LmJvb2wubXVzdF9ub3QucHVzaCh7XG4gICAgICAgICAgZXhpc3RzOiB7XG4gICAgICAgICAgICBmaWVsZDogJ3JlcXVpcmVkQWdlJ1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlsdGVycy5yZXF1aXJlZEFnZSkge1xuICAgICAgcXVlcnkuYm9vbC5tdXN0LnB1c2goe1xuICAgICAgICByYW5nZToge1xuICAgICAgICAgIHJlcXVpcmVkQWdlOiB7XG4gICAgICAgICAgICBndGU6IGZpbHRlcnMucmVxdWlyZWRBZ2UsXG4gICAgICAgICAgICBsdDogZmlsdGVycy5yZXF1aXJlZEFnZSArIDEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoJ2hhc1Njb3JlJyBpbiBmaWx0ZXJzKSB7XG4gICAgICBpZiAoZmlsdGVycy5oYXNTY29yZSkge1xuICAgICAgICBxdWVyeS5ib29sLm11c3QucHVzaCh7XG4gICAgICAgICAgZXhpc3RzOiB7XG4gICAgICAgICAgICBmaWVsZDogJ3Njb3JlJ1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnkuYm9vbC5tdXN0X25vdC5wdXNoKHtcbiAgICAgICAgICBleGlzdHM6IHtcbiAgICAgICAgICAgIGZpZWxkOiAnc2NvcmUnXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLnNjb3JlKSB7XG4gICAgICBxdWVyeS5ib29sLm11c3QucHVzaCh7XG4gICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgc2NvcmU6IHtcbiAgICAgICAgICAgIGd0ZTogZmlsdGVycy5zY29yZSxcbiAgICAgICAgICAgIGx0OiBmaWx0ZXJzLnNjb3JlICsgMSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmxhbmd1YWdlKSB7XG4gICAgICBxdWVyeS5ib29sLm11c3QucHVzaCh7XG4gICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgbGFuZ3VhZ2U6IHtcbiAgICAgICAgICAgIHF1ZXJ5OiBmaWx0ZXJzLmxhbmd1YWdlLFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAoIXNvcnRJbnB1dCkge1xuICAgIHNvcnRJbnB1dCA9ICctY3JlYXRlZEF0JztcbiAgfVxuICBjb25zdCBzb3J0S2V5ID0gc29ydElucHV0LnJlcGxhY2UoJy0nLCAnJyk7XG4gIGNvbnN0IHNvcnRPcmRlciA9IHNvcnRJbnB1dFswXSA9PT0gJy0nID8gJ2Rlc2MnIDogJ2FzYyc7XG4gIGNvbnN0IHNvcnQ6IGFueSA9IHtcbiAgICBbc29ydEtleV06IHNvcnRPcmRlcixcbiAgfTtcbiAgcmV0dXJuIGVsYXN0aWNTZWFyY2hTZXJ2aWNlLnNlYXJjaChxdWVyeSwgc29ydCwgY291bnQsIHBhZ2UpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/elasticsearch/idea.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/review.ts":
/*!*************************************!*\
  !*** ./lib/elasticsearch/review.ts ***!
  \*************************************/
/*! exports provided: queryReviews */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryReviews\", function() { return queryReviews; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nfunction queryReviews(ideaId) {\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        ['type.keyword']: 'Review',\n                    },\n                },\n                {\n                    term: {\n                        ['ideaId.keyword']: ideaId,\n                    },\n                },\n            ],\n        },\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC9yZXZpZXcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZWxhc3RpY3NlYXJjaC9yZXZpZXcudHM/ZTY3NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBlbGFzdGljU2VhcmNoU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5UmV2aWV3cyhpZGVhSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHF1ZXJ5OiBhbnkgPSB7XG4gICAgYm9vbDoge1xuICAgICAgbXVzdDogW1xuICAgICAgICB7XG4gICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgWyd0eXBlLmtleXdvcmQnXTogJ1JldmlldycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRlcm06IHtcbiAgICAgICAgICAgIFsnaWRlYUlkLmtleXdvcmQnXTogaWRlYUlkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIH07XG4gIHJldHVybiBlbGFzdGljU2VhcmNoU2VydmljZS5zZWFyY2gocXVlcnkpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/elasticsearch/review.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/sharing.ts":
/*!**************************************!*\
  !*** ./lib/elasticsearch/sharing.ts ***!
  \**************************************/
/*! exports provided: querySharingsByUserId, querySharingsBySharerId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"querySharingsByUserId\", function() { return querySharingsByUserId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"querySharingsBySharerId\", function() { return querySharingsBySharerId; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nfunction querySharingsByUserId(userId) {\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        type: 'Sharing',\n                    },\n                },\n                {\n                    term: {\n                        userId,\n                    },\n                },\n            ],\n        },\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query);\n}\nfunction querySharingsBySharerId(sharerId) {\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        type: 'sharing',\n                    },\n                },\n                {\n                    term: {\n                        sharerId,\n                    },\n                },\n            ],\n        },\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC9zaGFyaW5nLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2VsYXN0aWNzZWFyY2gvc2hhcmluZy50cz9jMTJkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IGVsYXN0aWNTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlTaGFyaW5nc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICBib29sOiB7XG4gICAgICBtdXN0OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgICB0eXBlOiAnU2hhcmluZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRlcm06IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xuICByZXR1cm4gZWxhc3RpY1NlYXJjaFNlcnZpY2Uuc2VhcmNoKHF1ZXJ5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5U2hhcmluZ3NCeVNoYXJlcklkKHNoYXJlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBxdWVyeTogYW55ID0ge1xuICAgIGJvb2w6IHtcbiAgICAgIG11c3Q6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRlcm06IHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGFyaW5nJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgc2hhcmVySWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgfTtcbiAgcmV0dXJuIGVsYXN0aWNTZWFyY2hTZXJ2aWNlLnNlYXJjaChxdWVyeSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/elasticsearch/sharing.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/user.ts":
/*!***********************************!*\
  !*** ./lib/elasticsearch/user.ts ***!
  \***********************************/
/*! exports provided: queryUsersBySearchQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryUsersBySearchQuery\", function() { return queryUsersBySearchQuery; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nfunction queryUsersBySearchQuery(searchQuery) {\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        type: 'User',\n                    },\n                },\n                {\n                    bool: {\n                        should: [\n                            {\n                                match: {\n                                    firstName: {\n                                        query: searchQuery,\n                                        fuzziness: 2,\n                                        prefix_length: 1,\n                                    },\n                                },\n                            },\n                            {\n                                match: {\n                                    lastName: {\n                                        query: searchQuery,\n                                        fuzziness: 2,\n                                        prefix_length: 1,\n                                    },\n                                },\n                            },\n                        ],\n                    }\n                }\n            ],\n        }\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC91c2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2VsYXN0aWNzZWFyY2gvdXNlci50cz83ZjI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IGVsYXN0aWNTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlVc2Vyc0J5U2VhcmNoUXVlcnkoc2VhcmNoUXVlcnk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHF1ZXJ5OiBhbnkgPSB7XG4gICAgYm9vbDoge1xuICAgICAgbXVzdDogW1xuICAgICAgICB7XG4gICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgdHlwZTogJ1VzZXInLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBib29sOiB7XG4gICAgICAgICAgICBzaG91bGQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHNlYXJjaFF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBmdXp6aW5lc3M6IDIsXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeF9sZW5ndGg6IDEsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHNlYXJjaFF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBmdXp6aW5lc3M6IDIsXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeF9sZW5ndGg6IDEsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICB9XG4gIH07XG4gIHJldHVybiBlbGFzdGljU2VhcmNoU2VydmljZS5zZWFyY2gocXVlcnkpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/elasticsearch/user.ts\n");

/***/ }),

/***/ "./lib/elasticsearch/world.ts":
/*!************************************!*\
  !*** ./lib/elasticsearch/world.ts ***!
  \************************************/
/*! exports provided: queryWorlds */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryWorlds\", function() { return queryWorlds; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nlet SIZE = 10;\nfunction queryWorlds(userIds, filters, sortInput, page) {\n    let count = SIZE;\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        ['type.keyword']: 'World',\n                    },\n                },\n                {\n                    terms: {\n                        ['userId.keyword']: userIds,\n                    },\n                },\n            ],\n        },\n    };\n    if (filters) {\n        if (filters.count) {\n            count = filters.count;\n        }\n        if (filters.label) {\n            query.bool.must.push({\n                match: {\n                    label: {\n                        query: filters.label,\n                        fuzziness: 2,\n                        prefix_length: 1,\n                    },\n                },\n            });\n        }\n    }\n    if (!sortInput) {\n        sortInput = '-createdAt';\n    }\n    const sortKey = sortInput.replace('-', '');\n    const sortOrder = sortInput[0] === '-' ? 'desc' : 'asc';\n    const sort = {\n        [sortKey]: sortOrder,\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].search(query, sort, count, page);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWxhc3RpY3NlYXJjaC93b3JsZC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9lbGFzdGljc2VhcmNoL3dvcmxkLnRzPzJmOWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IHsgZWxhc3RpY1NlYXJjaFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5cbmxldCBTSVpFID0gMTA7XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVdvcmxkcyh1c2VySWRzOiBzdHJpbmdbXSwgZmlsdGVyczogYW55LCBzb3J0SW5wdXQ6IHN0cmluZywgcGFnZTogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgbGV0IGNvdW50ID0gU0laRTtcbiAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICBib29sOiB7XG4gICAgICBtdXN0OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgICBbJ3R5cGUua2V5d29yZCddOiAnV29ybGQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtczoge1xuICAgICAgICAgICAgWyd1c2VySWQua2V5d29yZCddOiB1c2VySWRzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIH07XG4gIGlmIChmaWx0ZXJzKSB7XG4gICAgaWYgKGZpbHRlcnMuY291bnQpIHtcbiAgICAgIGNvdW50ID0gZmlsdGVycy5jb3VudDtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMubGFiZWwpIHtcbiAgICAgIHF1ZXJ5LmJvb2wubXVzdC5wdXNoKHtcbiAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgcXVlcnk6IGZpbHRlcnMubGFiZWwsXG4gICAgICAgICAgICBmdXp6aW5lc3M6IDIsXG4gICAgICAgICAgICBwcmVmaXhfbGVuZ3RoOiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaWYgKCFzb3J0SW5wdXQpIHtcbiAgICBzb3J0SW5wdXQgPSAnLWNyZWF0ZWRBdCc7XG4gIH1cbiAgY29uc3Qgc29ydEtleSA9IHNvcnRJbnB1dC5yZXBsYWNlKCctJywgJycpO1xuICBjb25zdCBzb3J0T3JkZXIgPSBzb3J0SW5wdXRbMF0gPT09ICctJyA/ICdkZXNjJyA6ICdhc2MnO1xuICBjb25zdCBzb3J0OiBhbnkgPSB7XG4gICAgW3NvcnRLZXldOiBzb3J0T3JkZXIsXG4gIH07XG4gIHJldHVybiBlbGFzdGljU2VhcmNoU2VydmljZS5zZWFyY2gocXVlcnksIHNvcnQsIGNvdW50LCBwYWdlKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/elasticsearch/world.ts\n");

/***/ }),

/***/ "./lib/handler.ts":
/*!************************!*\
  !*** ./lib/handler.ts ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var apollo_server_lambda__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\n/* harmony import */ var apollo_server_lambda__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apollo_server_lambda__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _schema_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema/schema */ \"./lib/schema/schema.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services */ \"./lib/services/index.ts\");\n/* harmony import */ var _handlers_event_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handlers/event.handler */ \"./lib/handlers/event.handler.ts\");\n\n\n\n\nexports.auth = (event, context, callback) => {\n    return _services__WEBPACK_IMPORTED_MODULE_2__[\"authService\"].authenticate(event, callback);\n};\nexports.graphql = (event, context, callback) => {\n    const server = new apollo_server_lambda__WEBPACK_IMPORTED_MODULE_0__[\"ApolloServer\"]({\n        playground: true,\n        introspection: true,\n        typeDefs: _schema_schema__WEBPACK_IMPORTED_MODULE_1__[\"typeDefs\"],\n        resolvers: _schema_schema__WEBPACK_IMPORTED_MODULE_1__[\"resolvers\"],\n        context: ({ event, context }) => ({\n            headers: event.headers,\n            functionName: context.functionName,\n            event,\n            context,\n            userId: event.requestContext.authorizer.userId,\n        }),\n    });\n    const handler = server.createHandler({\n        cors: {\n            origin: '*',\n            credentials: true,\n        },\n    });\n    return handler(event, context, callback);\n};\nexports.stream = (event, context, callback) => {\n    Object(_handlers_event_handler__WEBPACK_IMPORTED_MODULE_3__[\"handleEvent\"])(event, callback);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaGFuZGxlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9oYW5kbGVyLnRzP2IxYmEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IHsgQXBvbGxvU2VydmVyIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1sYW1iZGEnO1xuaW1wb3J0IHsgdHlwZURlZnMsIHJlc29sdmVycyB9IGZyb20gJy4vc2NoZW1hL3NjaGVtYSc7XG5pbXBvcnQgeyBhdXRoU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHsgaGFuZGxlRXZlbnQgfSBmcm9tICcuL2hhbmRsZXJzL2V2ZW50LmhhbmRsZXInO1xuXG5leHBvcnRzLmF1dGggPSAoZXZlbnQsIGNvbnRleHQsIGNhbGxiYWNrKSA9PiB7XG4gIHJldHVybiBhdXRoU2VydmljZS5hdXRoZW50aWNhdGUoZXZlbnQsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0cy5ncmFwaHFsID0gKGV2ZW50LCBjb250ZXh0LCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHtcbiAgICBwbGF5Z3JvdW5kOiB0cnVlLFxuICAgIGludHJvc3BlY3Rpb246IHRydWUsXG4gICAgdHlwZURlZnMsXG4gICAgcmVzb2x2ZXJzLFxuICAgIGNvbnRleHQ6ICh7IGV2ZW50LCBjb250ZXh0IH0pID0+ICh7XG4gICAgICBoZWFkZXJzOiBldmVudC5oZWFkZXJzLFxuICAgICAgZnVuY3Rpb25OYW1lOiBjb250ZXh0LmZ1bmN0aW9uTmFtZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY29udGV4dCxcbiAgICAgIHVzZXJJZDogZXZlbnQucmVxdWVzdENvbnRleHQuYXV0aG9yaXplci51c2VySWQsXG4gICAgfSksXG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZXIgPSBzZXJ2ZXIuY3JlYXRlSGFuZGxlcih7XG4gICAgY29yczoge1xuICAgICAgb3JpZ2luOiAnKicsXG4gICAgICBjcmVkZW50aWFsczogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gaGFuZGxlcihldmVudCwgY29udGV4dCwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5zdHJlYW0gPSAoZXZlbnQsIGNvbnRleHQsIGNhbGxiYWNrKSA9PiB7XG4gIGhhbmRsZUV2ZW50KGV2ZW50LCBjYWxsYmFjayk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/handler.ts\n");

/***/ }),

/***/ "./lib/handlers/elasticsearch.handler.ts":
/*!***********************************************!*\
  !*** ./lib/handlers/elasticsearch.handler.ts ***!
  \***********************************************/
/*! exports provided: handleInsert, handleModify, handleRemove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleInsert\", function() { return handleInsert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleModify\", function() { return handleModify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleRemove\", function() { return handleRemove; });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\nfunction handleInsert(document) {\n    _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].index(document);\n}\nfunction handleModify(document) {\n    _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].index(document);\n}\nfunction handleRemove(document) {\n    _services__WEBPACK_IMPORTED_MODULE_0__[\"elasticSearchService\"].remove(document);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaGFuZGxlcnMvZWxhc3RpY3NlYXJjaC5oYW5kbGVyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2hhbmRsZXJzL2VsYXN0aWNzZWFyY2guaGFuZGxlci50cz8wZDZkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IGVsYXN0aWNTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlSW5zZXJ0KGRvY3VtZW50KSB7XG4gIGVsYXN0aWNTZWFyY2hTZXJ2aWNlLmluZGV4KGRvY3VtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZU1vZGlmeShkb2N1bWVudCkge1xuICBlbGFzdGljU2VhcmNoU2VydmljZS5pbmRleChkb2N1bWVudCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZG9jdW1lbnQpIHtcbiAgZWxhc3RpY1NlYXJjaFNlcnZpY2UucmVtb3ZlKGRvY3VtZW50KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/handlers/elasticsearch.handler.ts\n");

/***/ }),

/***/ "./lib/handlers/event.handler.ts":
/*!***************************************!*\
  !*** ./lib/handlers/event.handler.ts ***!
  \***************************************/
/*! exports provided: handleEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleEvent\", function() { return handleEvent; });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _elasticsearch_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./elasticsearch.handler */ \"./lib/handlers/elasticsearch.handler.ts\");\n/* harmony import */ var _review_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./review.handler */ \"./lib/handlers/review.handler.ts\");\n\n\n\nasync function handleEvent(event, callback) {\n    for (const record of event.Records) {\n        if (record.eventName == 'INSERT') {\n            const document = aws_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.DynamoDB.Converter.unmarshall(record.dynamodb.NewImage);\n            _elasticsearch_handler__WEBPACK_IMPORTED_MODULE_1__[\"handleInsert\"](document);\n            _review_handler__WEBPACK_IMPORTED_MODULE_2__[\"handleInsert\"](document);\n        }\n        if (record.eventName == 'MODIFY') {\n            const document = aws_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.DynamoDB.Converter.unmarshall(record.dynamodb.NewImage);\n            _elasticsearch_handler__WEBPACK_IMPORTED_MODULE_1__[\"handleModify\"](document);\n            _review_handler__WEBPACK_IMPORTED_MODULE_2__[\"handleModify\"](document);\n        }\n        if (record.eventName == 'REMOVE') {\n            const document = aws_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.DynamoDB.Converter.unmarshall(record.dynamodb.OldImage);\n            _elasticsearch_handler__WEBPACK_IMPORTED_MODULE_1__[\"handleRemove\"](document);\n        }\n    }\n    callback(null, `Successfully processed ${event.Records.length} records.`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaGFuZGxlcnMvZXZlbnQuaGFuZGxlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9oYW5kbGVycy9ldmVudC5oYW5kbGVyLnRzPzk3MDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IEFXUyBmcm9tICdhd3Mtc2RrJztcbmltcG9ydCAqIGFzIGVsYXN0aWNTZWFyY2hIYW5kbGVyIGZyb20gJy4vZWxhc3RpY3NlYXJjaC5oYW5kbGVyJztcbmltcG9ydCAqIGFzIGNoYXJhY3RlckhhbmRsZXIgZnJvbSAnLi9jaGFyYWN0ZXIuaGFuZGxlcic7XG5pbXBvcnQgKiBhcyBpZGVhSGFuZGxlciBmcm9tICcuL2lkZWEuaGFuZGxlcic7XG5pbXBvcnQgKiBhcyByZXZpZXdIYW5kbGVyIGZyb20gJy4vcmV2aWV3LmhhbmRsZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZXZlbnQsIGNhbGxiYWNrKSB7XG4gIGZvciAoY29uc3QgcmVjb3JkIG9mIGV2ZW50LlJlY29yZHMpIHtcbiAgICBpZiAocmVjb3JkLmV2ZW50TmFtZSA9PSAnSU5TRVJUJykge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBBV1MuRHluYW1vREIuQ29udmVydGVyLnVubWFyc2hhbGwocmVjb3JkLmR5bmFtb2RiLk5ld0ltYWdlKTtcbiAgICAgIGVsYXN0aWNTZWFyY2hIYW5kbGVyLmhhbmRsZUluc2VydChkb2N1bWVudCk7XG4gICAgICAvLyBjaGFyYWN0ZXJIYW5kbGVyLmhhbmRsZU1vZGlmeShkb2N1bWVudCk7XG4gICAgICAvLyBpZGVhSGFuZGxlci5oYW5kbGVJbnNlcnQoZG9jdW1lbnQpO1xuICAgICAgcmV2aWV3SGFuZGxlci5oYW5kbGVJbnNlcnQoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBpZiAocmVjb3JkLmV2ZW50TmFtZSA9PSAnTU9ESUZZJykge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBBV1MuRHluYW1vREIuQ29udmVydGVyLnVubWFyc2hhbGwocmVjb3JkLmR5bmFtb2RiLk5ld0ltYWdlKTtcbiAgICAgIGVsYXN0aWNTZWFyY2hIYW5kbGVyLmhhbmRsZU1vZGlmeShkb2N1bWVudCk7XG4gICAgICAvLyBjaGFyYWN0ZXJIYW5kbGVyLmhhbmRsZU1vZGlmeShkb2N1bWVudCk7XG4gICAgICAvLyBpZGVhSGFuZGxlci5oYW5kbGVNb2RpZnkoZG9jdW1lbnQpO1xuICAgICAgcmV2aWV3SGFuZGxlci5oYW5kbGVNb2RpZnkoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBpZiAocmVjb3JkLmV2ZW50TmFtZSA9PSAnUkVNT1ZFJykge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBBV1MuRHluYW1vREIuQ29udmVydGVyLnVubWFyc2hhbGwocmVjb3JkLmR5bmFtb2RiLk9sZEltYWdlKTtcbiAgICAgIGVsYXN0aWNTZWFyY2hIYW5kbGVyLmhhbmRsZVJlbW92ZShkb2N1bWVudCk7XG4gICAgfVxuICB9XG4gIGNhbGxiYWNrKG51bGwsIGBTdWNjZXNzZnVsbHkgcHJvY2Vzc2VkICR7ZXZlbnQuUmVjb3Jkcy5sZW5ndGh9IHJlY29yZHMuYCk7XG59XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/handlers/event.handler.ts\n");

/***/ }),

/***/ "./lib/handlers/review.handler.ts":
/*!****************************************!*\
  !*** ./lib/handlers/review.handler.ts ***!
  \****************************************/
/*! exports provided: updateIdeaBasedOnReviews, handleInsert, handleModify */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateIdeaBasedOnReviews\", function() { return updateIdeaBasedOnReviews; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleInsert\", function() { return handleInsert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleModify\", function() { return handleModify; });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services */ \"./lib/services/index.ts\");\n\n\nfunction updateIdea(ideaId, args) {\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"dynamoService\"].getEntity().get(ideaId)\n        .then((idea) => {\n        if (!idea) {\n            throw new Error('Idea not found');\n        }\n        Object.assign(idea, args);\n        return idea.save();\n    });\n}\nfunction queryReviewsByIdeaId(ideaId) {\n    const query = {\n        bool: {\n            must: [\n                {\n                    term: {\n                        ['type.keyword']: 'Review',\n                    },\n                },\n                {\n                    term: {\n                        ['ideaId.keyword']: ideaId,\n                    },\n                },\n            ],\n        },\n    };\n    return _services__WEBPACK_IMPORTED_MODULE_1__[\"elasticSearchService\"].search(query);\n}\nfunction updateIdeaBasedOnReviews(ideaId) {\n    return queryReviewsByIdeaId(ideaId)\n        .then((reviews) => {\n        if (0 === reviews.hits.hits.length) {\n            console.log('No review found');\n            return;\n        }\n        const scores = reviews.hits.hits\n            .filter((document) => document._source.score)\n            .map((document) => document._source.score);\n        const score = scores.length > 0 ? Object(lodash__WEBPACK_IMPORTED_MODULE_0__[\"mean\"])(scores) : undefined;\n        const requiredAges = reviews.hits.hits\n            .filter((document) => document._source.requiredAge)\n            .map((document) => document._source.requiredAge);\n        const requiredAge = requiredAges.length > 0 ? Object(lodash__WEBPACK_IMPORTED_MODULE_0__[\"mean\"])(requiredAges) : undefined;\n        console.log('computed average score: ', score);\n        console.log('computed average requiredAge: ', requiredAge);\n        if (score && requiredAge) {\n            return updateIdea(ideaId, {\n                score: score ? score : null,\n                requiredAge: requiredAge ? requiredAge : null,\n            });\n        }\n    });\n}\nfunction timeout(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nasync function handleInsert(document) {\n    if ('Review' !== document.id.split('-')[0]) {\n        return;\n    }\n    await timeout(5000);\n    updateIdeaBasedOnReviews(document.ideaId);\n}\nasync function handleModify(document) {\n    if ('Review' !== document.id.split('-')[0]) {\n        return;\n    }\n    await timeout(5000);\n    updateIdeaBasedOnReviews(document.ideaId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaGFuZGxlcnMvcmV2aWV3LmhhbmRsZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvaGFuZGxlcnMvcmV2aWV3LmhhbmRsZXIudHM/MWMxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBtZWFuIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGR5bmFtb1NlcnZpY2UsIGVsYXN0aWNTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5mdW5jdGlvbiB1cGRhdGVJZGVhKGlkZWFJZDogc3RyaW5nLCBhcmdzOiBhbnkpIHtcbiAgcmV0dXJuIGR5bmFtb1NlcnZpY2UuZ2V0RW50aXR5KCkuZ2V0KGlkZWFJZClcbiAgICAudGhlbigoaWRlYTogYW55KSA9PiB7XG4gICAgICBpZiAoIWlkZWEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZGVhIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmFzc2lnbihpZGVhLCBhcmdzKTtcbiAgICAgIHJldHVybiBpZGVhLnNhdmUoKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBxdWVyeVJldmlld3NCeUlkZWFJZChpZGVhSWQ6IHN0cmluZylcbntcbiAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICBib29sOiB7XG4gICAgICBtdXN0OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXJtOiB7XG4gICAgICAgICAgICBbJ3R5cGUua2V5d29yZCddOiAnUmV2aWV3JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgWydpZGVhSWQua2V5d29yZCddOiBpZGVhSWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgfTtcbiAgcmV0dXJuIGVsYXN0aWNTZWFyY2hTZXJ2aWNlLnNlYXJjaChxdWVyeSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJZGVhQmFzZWRPblJldmlld3MoaWRlYUlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHF1ZXJ5UmV2aWV3c0J5SWRlYUlkKGlkZWFJZClcbiAgICAudGhlbigocmV2aWV3czogYW55KSA9PiB7XG4gICAgICBpZiAoMCA9PT0gcmV2aWV3cy5oaXRzLmhpdHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyByZXZpZXcgZm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2NvcmVzID0gcmV2aWV3cy5oaXRzLmhpdHNcbiAgICAgICAgLmZpbHRlcigoZG9jdW1lbnQ6IGFueSkgPT4gZG9jdW1lbnQuX3NvdXJjZS5zY29yZSlcbiAgICAgICAgLm1hcCgoZG9jdW1lbnQ6IGFueSkgPT4gZG9jdW1lbnQuX3NvdXJjZS5zY29yZSk7XG4gICAgICBjb25zdCBzY29yZSA9IHNjb3Jlcy5sZW5ndGggPiAwID8gbWVhbihzY29yZXMpIDogdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCByZXF1aXJlZEFnZXMgPSByZXZpZXdzLmhpdHMuaGl0c1xuICAgICAgICAuZmlsdGVyKChkb2N1bWVudDogYW55KSA9PiBkb2N1bWVudC5fc291cmNlLnJlcXVpcmVkQWdlKVxuICAgICAgICAubWFwKChkb2N1bWVudDogYW55KSA9PiBkb2N1bWVudC5fc291cmNlLnJlcXVpcmVkQWdlKTtcbiAgICAgIGNvbnN0IHJlcXVpcmVkQWdlID0gcmVxdWlyZWRBZ2VzLmxlbmd0aCA+IDAgPyBtZWFuKHJlcXVpcmVkQWdlcykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdjb21wdXRlZCBhdmVyYWdlIHNjb3JlOiAnLCBzY29yZSk7XG4gICAgICBjb25zb2xlLmxvZygnY29tcHV0ZWQgYXZlcmFnZSByZXF1aXJlZEFnZTogJywgcmVxdWlyZWRBZ2UpO1xuXG4gICAgICBpZiAoc2NvcmUgJiYgcmVxdWlyZWRBZ2UpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUlkZWEoaWRlYUlkLCB7XG4gICAgICAgICAgc2NvcmU6IHNjb3JlID8gc2NvcmUgOiBudWxsLFxuICAgICAgICAgIHJlcXVpcmVkQWdlOiByZXF1aXJlZEFnZSA/IHJlcXVpcmVkQWdlIDogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbn1cblxuLyoqXG4gKiBJdCdzIGEgYml0IGhhY2tpc2ggYnV0IHdlJ3JlIHdhaXRpbmcgZm9yIEVTXG4gKiB0byBiZSB1cCB0byBkYXRlIGJlZm9yZSBjb21wdXRpbmcgYXZlcmFnZSBzY29yZS9yZXF1aXJlZEFnZVxuICpcbiAqIEBwYXJhbSBtc1xuICovXG5mdW5jdGlvbiB0aW1lb3V0KG1zKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUluc2VydChkb2N1bWVudCkge1xuICBpZiAoJ1JldmlldycgIT09IGRvY3VtZW50LmlkLnNwbGl0KCctJylbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYXdhaXQgdGltZW91dCg1MDAwKTtcbiAgdXBkYXRlSWRlYUJhc2VkT25SZXZpZXdzKGRvY3VtZW50LmlkZWFJZCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVNb2RpZnkoZG9jdW1lbnQpIHtcbiAgaWYgKCdSZXZpZXcnICE9PSBkb2N1bWVudC5pZC5zcGxpdCgnLScpWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGF3YWl0IHRpbWVvdXQoNTAwMCk7XG4gIHVwZGF0ZUlkZWFCYXNlZE9uUmV2aWV3cyhkb2N1bWVudC5pZGVhSWQpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/handlers/review.handler.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/character.ts":
/*!*******************************************!*\
  !*** ./lib/schema/resolvers/character.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_file__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/file */ \"./lib/dynamo/file.ts\");\n/* harmony import */ var _dynamo_character__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../dynamo/character */ \"./lib/dynamo/character.ts\");\n/* harmony import */ var _dynamo_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dynamo/user */ \"./lib/dynamo/user.ts\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Character: {\n        user: (obj) => _dynamo_user__WEBPACK_IMPORTED_MODULE_2__[\"getUser\"](obj.userId),\n        files: (obj) => _dynamo_file__WEBPACK_IMPORTED_MODULE_0__[\"getFilesByIds\"](obj.files),\n    },\n    Query: {\n        characters: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"getCharacters\"](context.userId, args),\n    },\n    Mutation: {\n        createCharacter: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"createCharacter\"](args, context.userId),\n        updateCharacter: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"updateCharacter\"](args, context.userId),\n        deleteCharacter: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"deleteCharacter\"](args, context.userId),\n        addFile: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"addFile\"](args, context.userId),\n        removeFile: (_, args, context) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"removeFile\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy9jaGFyYWN0ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3Jlc29sdmVycy9jaGFyYWN0ZXIudHM/MjI5OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgKiBhcyBkYkZpbGUgZnJvbSAnLi4vLi4vZHluYW1vL2ZpbGUnO1xuaW1wb3J0ICogYXMgZGJDaGFyYWN0ZXIgZnJvbSAnLi4vLi4vZHluYW1vL2NoYXJhY3Rlcic7XG5pbXBvcnQgKiBhcyBkYlVzZXIgZnJvbSAnLi4vLi4vZHluYW1vL3VzZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIENoYXJhY3Rlcjoge1xuICAgIHVzZXI6IChvYmopID0+IGRiVXNlci5nZXRVc2VyKG9iai51c2VySWQpLFxuICAgIGZpbGVzOiAob2JqKSA9PiBkYkZpbGUuZ2V0RmlsZXNCeUlkcyhvYmouZmlsZXMpLFxuICB9LFxuICBRdWVyeToge1xuICAgIGNoYXJhY3RlcnM6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYkNoYXJhY3Rlci5nZXRDaGFyYWN0ZXJzKGNvbnRleHQudXNlcklkLCBhcmdzKSxcbiAgfSxcbiAgTXV0YXRpb246IHtcbiAgICBjcmVhdGVDaGFyYWN0ZXI6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYkNoYXJhY3Rlci5jcmVhdGVDaGFyYWN0ZXIoYXJncywgY29udGV4dC51c2VySWQpLFxuICAgIHVwZGF0ZUNoYXJhY3RlcjogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiQ2hhcmFjdGVyLnVwZGF0ZUNoYXJhY3RlcihhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gICAgZGVsZXRlQ2hhcmFjdGVyOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJDaGFyYWN0ZXIuZGVsZXRlQ2hhcmFjdGVyKGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgICBhZGRGaWxlOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJDaGFyYWN0ZXIuYWRkRmlsZShhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gICAgcmVtb3ZlRmlsZTogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiQ2hhcmFjdGVyLnJlbW92ZUZpbGUoYXJncywgY29udGV4dC51c2VySWQpLFxuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/character.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/file.ts":
/*!**************************************!*\
  !*** ./lib/schema/resolvers/file.ts ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_file__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/file */ \"./lib/dynamo/file.ts\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Query: {\n        files: (_, args) => _dynamo_file__WEBPACK_IMPORTED_MODULE_0__[\"getFiles\"](args),\n    },\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy9maWxlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NjaGVtYS9yZXNvbHZlcnMvZmlsZS50cz8wMmYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCAqIGFzIGRiRmlsZSBmcm9tICcuLi8uLi9keW5hbW8vZmlsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUXVlcnk6IHtcbiAgICBmaWxlczogKF8sIGFyZ3MpID0+IGRiRmlsZS5nZXRGaWxlcyhhcmdzKSxcbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/file.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/idea.ts":
/*!**************************************!*\
  !*** ./lib/schema/resolvers/idea.ts ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_idea__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/idea */ \"./lib/dynamo/idea.ts\");\n/* harmony import */ var _dynamo_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../dynamo/user */ \"./lib/dynamo/user.ts\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Idea: {\n        imgs: (obj) => obj.imgs,\n        user: (obj) => _dynamo_user__WEBPACK_IMPORTED_MODULE_1__[\"getUser\"](obj.userId),\n    },\n    Query: {\n        ideas: (_, args, context) => _dynamo_idea__WEBPACK_IMPORTED_MODULE_0__[\"getIdeas\"](context.userId, args),\n    },\n    Mutation: {\n        createIdea: (_, args, context) => _dynamo_idea__WEBPACK_IMPORTED_MODULE_0__[\"createIdea\"](args, context.userId),\n        updateIdea: (_, args, context) => _dynamo_idea__WEBPACK_IMPORTED_MODULE_0__[\"updateIdea\"](args, context.userId),\n        deleteIdea: (_, args, context) => _dynamo_idea__WEBPACK_IMPORTED_MODULE_0__[\"deleteIdea\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy9pZGVhLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NjaGVtYS9yZXNvbHZlcnMvaWRlYS50cz83MmY1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCAqIGFzIGRiSWRlYSBmcm9tICcuLi8uLi9keW5hbW8vaWRlYSc7XG5pbXBvcnQgKiBhcyBkYlVzZXIgZnJvbSAnLi4vLi4vZHluYW1vL3VzZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIElkZWE6IHtcbiAgICBpbWdzOiAob2JqKSA9PiBvYmouaW1ncyxcbiAgICB1c2VyOiAob2JqKSA9PiBkYlVzZXIuZ2V0VXNlcihvYmoudXNlcklkKSxcbiAgfSxcbiAgUXVlcnk6IHtcbiAgICBpZGVhczogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiSWRlYS5nZXRJZGVhcyhjb250ZXh0LnVzZXJJZCwgYXJncyksXG4gIH0sXG4gIE11dGF0aW9uOiB7XG4gICAgY3JlYXRlSWRlYTogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiSWRlYS5jcmVhdGVJZGVhKGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgICB1cGRhdGVJZGVhOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJJZGVhLnVwZGF0ZUlkZWEoYXJncywgY29udGV4dC51c2VySWQpLFxuICAgIGRlbGV0ZUlkZWE6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYklkZWEuZGVsZXRlSWRlYShhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/idea.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/review.ts":
/*!****************************************!*\
  !*** ./lib/schema/resolvers/review.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_review__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/review */ \"./lib/dynamo/review.ts\");\n/* harmony import */ var _dynamo_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../dynamo/user */ \"./lib/dynamo/user.ts\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Review: {\n        user: (obj) => _dynamo_user__WEBPACK_IMPORTED_MODULE_1__[\"getUser\"](obj.userId),\n    },\n    Query: {\n        reviews: (_, args, context) => _dynamo_review__WEBPACK_IMPORTED_MODULE_0__[\"getReviews\"](args.ideaId),\n    },\n    Mutation: {\n        createReview: (_, args, context) => _dynamo_review__WEBPACK_IMPORTED_MODULE_0__[\"createReview\"](args, context.userId),\n        updateReview: (_, args, context) => _dynamo_review__WEBPACK_IMPORTED_MODULE_0__[\"updateReview\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy9yZXZpZXcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3Jlc29sdmVycy9yZXZpZXcudHM/NTNjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgKiBhcyBkYlJldmlldyBmcm9tICcuLi8uLi9keW5hbW8vcmV2aWV3JztcbmltcG9ydCAqIGFzIGRiVXNlciBmcm9tICcuLi8uLi9keW5hbW8vdXNlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUmV2aWV3OiB7XG4gICAgdXNlcjogKG9iaikgPT4gZGJVc2VyLmdldFVzZXIob2JqLnVzZXJJZCksXG4gIH0sXG4gIFF1ZXJ5OiB7XG4gICAgcmV2aWV3czogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiUmV2aWV3LmdldFJldmlld3MoYXJncy5pZGVhSWQpLFxuICB9LFxuICBNdXRhdGlvbjoge1xuICAgIGNyZWF0ZVJldmlldzogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiUmV2aWV3LmNyZWF0ZVJldmlldyhhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gICAgdXBkYXRlUmV2aWV3OiAoXywgYXJncywgY29udGV4dCkgPT4gZGJSZXZpZXcudXBkYXRlUmV2aWV3KGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/review.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/sharing.ts":
/*!*****************************************!*\
  !*** ./lib/schema/resolvers/sharing.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_sharing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/sharing */ \"./lib/dynamo/sharing.ts\");\n/* harmony import */ var _dynamo_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../dynamo/user */ \"./lib/dynamo/user.ts\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Sharing: {\n        user: (obj) => _dynamo_user__WEBPACK_IMPORTED_MODULE_1__[\"getUser\"](obj.userId),\n    },\n    Query: {\n        sharings: (_, args, context) => _dynamo_sharing__WEBPACK_IMPORTED_MODULE_0__[\"getSharings\"](context.userId),\n    },\n    Mutation: {\n        createSharing: (_, args, context) => _dynamo_sharing__WEBPACK_IMPORTED_MODULE_0__[\"createSharing\"](args, context.userId),\n        deleteSharing: (_, args, context) => _dynamo_sharing__WEBPACK_IMPORTED_MODULE_0__[\"deleteSharing\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy9zaGFyaW5nLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NjaGVtYS9yZXNvbHZlcnMvc2hhcmluZy50cz9jMjg5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCAqIGFzIGRiU2hhcmluZyBmcm9tICcuLi8uLi9keW5hbW8vc2hhcmluZyc7XG5pbXBvcnQgKiBhcyBkYlVzZXIgZnJvbSAnLi4vLi4vZHluYW1vL3VzZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFNoYXJpbmc6IHtcbiAgICB1c2VyOiAob2JqKSA9PiBkYlVzZXIuZ2V0VXNlcihvYmoudXNlcklkKSxcbiAgfSxcbiAgUXVlcnk6IHtcbiAgICBzaGFyaW5nczogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiU2hhcmluZy5nZXRTaGFyaW5ncyhjb250ZXh0LnVzZXJJZCksXG4gIH0sXG4gIE11dGF0aW9uOiB7XG4gICAgY3JlYXRlU2hhcmluZzogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiU2hhcmluZy5jcmVhdGVTaGFyaW5nKGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgICBkZWxldGVTaGFyaW5nOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJTaGFyaW5nLmRlbGV0ZVNoYXJpbmcoYXJncywgY29udGV4dC51c2VySWQpLFxuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/sharing.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/user.ts":
/*!**************************************!*\
  !*** ./lib/schema/resolvers/user.ts ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/user */ \"./lib/dynamo/user.ts\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Query: {\n        user: (_, args, context) => _dynamo_user__WEBPACK_IMPORTED_MODULE_0__[\"getUser\"](args.id),\n        users: (_, args, context) => _dynamo_user__WEBPACK_IMPORTED_MODULE_0__[\"getUsers\"](args),\n        authUser: (_, args, context) => _dynamo_user__WEBPACK_IMPORTED_MODULE_0__[\"getAuthUser\"](context.userId),\n    },\n    Mutation: {\n        updateUser: (_, args, context) => _dynamo_user__WEBPACK_IMPORTED_MODULE_0__[\"updateUser\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy91c2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NjaGVtYS9yZXNvbHZlcnMvdXNlci50cz9hNzVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCAqIGFzIGRiVXNlciBmcm9tICcuLi8uLi9keW5hbW8vdXNlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUXVlcnk6IHtcbiAgICB1c2VyOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJVc2VyLmdldFVzZXIoYXJncy5pZCksXG4gICAgdXNlcnM6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYlVzZXIuZ2V0VXNlcnMoYXJncyksXG4gICAgYXV0aFVzZXI6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYlVzZXIuZ2V0QXV0aFVzZXIoY29udGV4dC51c2VySWQpLFxuICB9LFxuICBNdXRhdGlvbjoge1xuICAgIHVwZGF0ZVVzZXI6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYlVzZXIudXBkYXRlVXNlcihhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/user.ts\n");

/***/ }),

/***/ "./lib/schema/resolvers/world.ts":
/*!***************************************!*\
  !*** ./lib/schema/resolvers/world.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamo_world__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dynamo/world */ \"./lib/dynamo/world.ts\");\n/* harmony import */ var _dynamo_character__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../dynamo/character */ \"./lib/dynamo/character.ts\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    World: {\n        characters: (obj) => _dynamo_character__WEBPACK_IMPORTED_MODULE_1__[\"getCharactersByIds\"](obj.characters),\n    },\n    Query: {\n        world: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"getWorld\"](context.userId, args),\n        worlds: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"getWorlds\"](context.userId, args),\n    },\n    Mutation: {\n        createWorld: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"createWorld\"](args, context.userId),\n        updateWorld: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"updateWorld\"](args, context.userId),\n        deleteWorld: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"deleteWorld\"](args, context.userId),\n        addCharacter: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"addCharacter\"](args, context.userId),\n        removeCharacter: (_, args, context) => _dynamo_world__WEBPACK_IMPORTED_MODULE_0__[\"removeCharacter\"](args, context.userId),\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3Jlc29sdmVycy93b3JsZC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zY2hlbWEvcmVzb2x2ZXJzL3dvcmxkLnRzP2JhZWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0ICogYXMgZGJXb3JsZCBmcm9tICcuLi8uLi9keW5hbW8vd29ybGQnO1xuaW1wb3J0ICogYXMgZGJDaGFyYWN0ZXIgZnJvbSAnLi4vLi4vZHluYW1vL2NoYXJhY3Rlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgV29ybGQ6IHtcbiAgICBjaGFyYWN0ZXJzOiAob2JqKSA9PiBkYkNoYXJhY3Rlci5nZXRDaGFyYWN0ZXJzQnlJZHMob2JqLmNoYXJhY3RlcnMpLFxuICB9LFxuICBRdWVyeToge1xuICAgIHdvcmxkOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJXb3JsZC5nZXRXb3JsZChjb250ZXh0LnVzZXJJZCwgYXJncyksXG4gICAgd29ybGRzOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJXb3JsZC5nZXRXb3JsZHMoY29udGV4dC51c2VySWQsIGFyZ3MpLFxuICB9LFxuICBNdXRhdGlvbjoge1xuICAgIGNyZWF0ZVdvcmxkOiAoXywgYXJncywgY29udGV4dCkgPT4gZGJXb3JsZC5jcmVhdGVXb3JsZChhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gICAgdXBkYXRlV29ybGQ6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYldvcmxkLnVwZGF0ZVdvcmxkKGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgICBkZWxldGVXb3JsZDogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiV29ybGQuZGVsZXRlV29ybGQoYXJncywgY29udGV4dC51c2VySWQpLFxuICAgIGFkZENoYXJhY3RlcjogKF8sIGFyZ3MsIGNvbnRleHQpID0+IGRiV29ybGQuYWRkQ2hhcmFjdGVyKGFyZ3MsIGNvbnRleHQudXNlcklkKSxcbiAgICByZW1vdmVDaGFyYWN0ZXI6IChfLCBhcmdzLCBjb250ZXh0KSA9PiBkYldvcmxkLnJlbW92ZUNoYXJhY3RlcihhcmdzLCBjb250ZXh0LnVzZXJJZCksXG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/schema/resolvers/world.ts\n");

/***/ }),

/***/ "./lib/schema/schema.ts":
/*!******************************!*\
  !*** ./lib/schema/schema.ts ***!
  \******************************/
/*! exports provided: typeDefs, resolvers, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"typeDefs\", function() { return typeDefs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resolvers\", function() { return resolvers; });\n/* harmony import */ var graphql_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql-tools */ \"graphql-tools\");\n/* harmony import */ var graphql_tools__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(graphql_tools__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _graphql_tools_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @graphql-tools/merge */ \"@graphql-tools/merge\");\n/* harmony import */ var _graphql_tools_merge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_graphql_tools_merge__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types_character__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/character */ \"./lib/schema/types/character.ts\");\n/* harmony import */ var _types_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/file */ \"./lib/schema/types/file.ts\");\n/* harmony import */ var _types_idea__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types/idea */ \"./lib/schema/types/idea.ts\");\n/* harmony import */ var _types_review__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types/review */ \"./lib/schema/types/review.ts\");\n/* harmony import */ var _types_sharing__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./types/sharing */ \"./lib/schema/types/sharing.ts\");\n/* harmony import */ var _types_user__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types/user */ \"./lib/schema/types/user.ts\");\n/* harmony import */ var _types_world__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./types/world */ \"./lib/schema/types/world.ts\");\n/* harmony import */ var _resolvers_character__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./resolvers/character */ \"./lib/schema/resolvers/character.ts\");\n/* harmony import */ var _resolvers_file__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./resolvers/file */ \"./lib/schema/resolvers/file.ts\");\n/* harmony import */ var _resolvers_idea__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./resolvers/idea */ \"./lib/schema/resolvers/idea.ts\");\n/* harmony import */ var _resolvers_review__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./resolvers/review */ \"./lib/schema/resolvers/review.ts\");\n/* harmony import */ var _resolvers_sharing__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./resolvers/sharing */ \"./lib/schema/resolvers/sharing.ts\");\n/* harmony import */ var _resolvers_user__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./resolvers/user */ \"./lib/schema/resolvers/user.ts\");\n/* harmony import */ var _resolvers_world__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./resolvers/world */ \"./lib/schema/resolvers/world.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst typeDefs = Object(_graphql_tools_merge__WEBPACK_IMPORTED_MODULE_1__[\"mergeTypeDefs\"])([\n    _types_character__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n    _types_file__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n    _types_idea__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    _types_review__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    _types_sharing__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n    _types_user__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n    _types_world__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\n]);\nconst resolvers = Object(_graphql_tools_merge__WEBPACK_IMPORTED_MODULE_1__[\"mergeResolvers\"])([\n    _resolvers_character__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n    _resolvers_file__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n    _resolvers_idea__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n    _resolvers_review__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n    _resolvers_sharing__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n    _resolvers_user__WEBPACK_IMPORTED_MODULE_14__[\"default\"],\n    _resolvers_world__WEBPACK_IMPORTED_MODULE_15__[\"default\"]\n]);\nconst schema = Object(graphql_tools__WEBPACK_IMPORTED_MODULE_0__[\"makeExecutableSchema\"])({\n    typeDefs,\n    resolvers,\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (schema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3NjaGVtYS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zY2hlbWEvc2NoZW1hLnRzPzFmMzciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0IHsgbWFrZUV4ZWN1dGFibGVTY2hlbWEgfSBmcm9tICdncmFwaHFsLXRvb2xzJztcbmltcG9ydCB7IG1lcmdlVHlwZURlZnMsIG1lcmdlUmVzb2x2ZXJzIH0gZnJvbSAnQGdyYXBocWwtdG9vbHMvbWVyZ2UnO1xuXG4vLyBUeXBlc1xuaW1wb3J0IGNoYXJhY3RlclR5cGUgZnJvbSAnLi90eXBlcy9jaGFyYWN0ZXInO1xuaW1wb3J0IGZpbGVUeXBlIGZyb20gJy4vdHlwZXMvZmlsZSc7XG5pbXBvcnQgaWRlYVR5cGUgZnJvbSAnLi90eXBlcy9pZGVhJztcbmltcG9ydCByZXZpZXdUeXBlIGZyb20gJy4vdHlwZXMvcmV2aWV3JztcbmltcG9ydCBzaGFyaW5nVHlwZSBmcm9tICcuL3R5cGVzL3NoYXJpbmcnO1xuaW1wb3J0IHVzZXJUeXBlIGZyb20gJy4vdHlwZXMvdXNlcic7XG5pbXBvcnQgd29ybGRUeXBlIGZyb20gJy4vdHlwZXMvd29ybGQnO1xuXG4vLyBSZXNvbHZlcnNcbmltcG9ydCBjaGFyYWN0ZXJSZXNvbHZlciBmcm9tICcuL3Jlc29sdmVycy9jaGFyYWN0ZXInO1xuaW1wb3J0IGZpbGVSZXNvbHZlciBmcm9tICcuL3Jlc29sdmVycy9maWxlJztcbmltcG9ydCBpZGVhUmVzb2x2ZXIgZnJvbSAnLi9yZXNvbHZlcnMvaWRlYSc7XG5pbXBvcnQgcmV2aWV3UmVzb2x2ZXIgZnJvbSAnLi9yZXNvbHZlcnMvcmV2aWV3JztcbmltcG9ydCBzaGFyaW5nUmVzb2x2ZXIgZnJvbSAnLi9yZXNvbHZlcnMvc2hhcmluZyc7XG5pbXBvcnQgdXNlclJlc29sdmVyIGZyb20gJy4vcmVzb2x2ZXJzL3VzZXInO1xuaW1wb3J0IHdvcmxkUmVzb2x2ZXIgZnJvbSAnLi9yZXNvbHZlcnMvd29ybGQnO1xuXG5leHBvcnQgY29uc3QgdHlwZURlZnM6IGFueSA9IG1lcmdlVHlwZURlZnMoW1xuICBjaGFyYWN0ZXJUeXBlLFxuICBmaWxlVHlwZSxcbiAgaWRlYVR5cGUsXG4gIHJldmlld1R5cGUsXG4gIHNoYXJpbmdUeXBlLFxuICB1c2VyVHlwZSxcbiAgd29ybGRUeXBlXG5dKTtcblxuZXhwb3J0IGNvbnN0IHJlc29sdmVyczogYW55ID0gbWVyZ2VSZXNvbHZlcnMoW1xuICBjaGFyYWN0ZXJSZXNvbHZlcixcbiAgZmlsZVJlc29sdmVyLFxuICBpZGVhUmVzb2x2ZXIsXG4gIHJldmlld1Jlc29sdmVyLFxuICBzaGFyaW5nUmVzb2x2ZXIsXG4gIHVzZXJSZXNvbHZlcixcbiAgd29ybGRSZXNvbHZlclxuXSk7XG5cbmNvbnN0IHNjaGVtYTogYW55ID0gbWFrZUV4ZWN1dGFibGVTY2hlbWEoe1xuICB0eXBlRGVmcyxcbiAgcmVzb2x2ZXJzLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNjaGVtYTtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/schema.ts\n");

/***/ }),

/***/ "./lib/schema/types/character.ts":
/*!***************************************!*\
  !*** ./lib/schema/types/character.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst Character = gql `\n  type Character {\n    id: String\n    label: String\n    userId: String\n    user: User\n    img: String\n    files: [File]\n  }\n  input CharacterInput {\n    label: String\n    count: Int\n  }\n  type CharacterEdge {\n    total: Int!\n    page: Int!\n    nodes: [Character]\n  }\n  type Query {\n    characters(characterInput: CharacterInput, page: Int, sort: String): CharacterEdge\n  }\n  type Mutation {\n    createCharacter(\n      label: String!\n    ): Character\n    updateCharacter(\n      id: String!\n      label: String\n    ): Character\n    deleteCharacter(\n      id: String!\n    ): Character\n    addFile(\n      id: String!\n      name: String!\n      size: Int!\n      type: String!\n      data: String!\n    ): Character\n    removeFile(\n      id: String!\n      fileId: String!\n    ): Character\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Character);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL2NoYXJhY3Rlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zY2hlbWEvdHlwZXMvY2hhcmFjdGVyLnRzPzJkOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuY29uc3QgeyBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItbGFtYmRhJyk7XG5cbmNvbnN0IENoYXJhY3RlciA9IGdxbGBcbiAgdHlwZSBDaGFyYWN0ZXIge1xuICAgIGlkOiBTdHJpbmdcbiAgICBsYWJlbDogU3RyaW5nXG4gICAgdXNlcklkOiBTdHJpbmdcbiAgICB1c2VyOiBVc2VyXG4gICAgaW1nOiBTdHJpbmdcbiAgICBmaWxlczogW0ZpbGVdXG4gIH1cbiAgaW5wdXQgQ2hhcmFjdGVySW5wdXQge1xuICAgIGxhYmVsOiBTdHJpbmdcbiAgICBjb3VudDogSW50XG4gIH1cbiAgdHlwZSBDaGFyYWN0ZXJFZGdlIHtcbiAgICB0b3RhbDogSW50IVxuICAgIHBhZ2U6IEludCFcbiAgICBub2RlczogW0NoYXJhY3Rlcl1cbiAgfVxuICB0eXBlIFF1ZXJ5IHtcbiAgICBjaGFyYWN0ZXJzKGNoYXJhY3RlcklucHV0OiBDaGFyYWN0ZXJJbnB1dCwgcGFnZTogSW50LCBzb3J0OiBTdHJpbmcpOiBDaGFyYWN0ZXJFZGdlXG4gIH1cbiAgdHlwZSBNdXRhdGlvbiB7XG4gICAgY3JlYXRlQ2hhcmFjdGVyKFxuICAgICAgbGFiZWw6IFN0cmluZyFcbiAgICApOiBDaGFyYWN0ZXJcbiAgICB1cGRhdGVDaGFyYWN0ZXIoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICAgbGFiZWw6IFN0cmluZ1xuICAgICk6IENoYXJhY3RlclxuICAgIGRlbGV0ZUNoYXJhY3RlcihcbiAgICAgIGlkOiBTdHJpbmchXG4gICAgKTogQ2hhcmFjdGVyXG4gICAgYWRkRmlsZShcbiAgICAgIGlkOiBTdHJpbmchXG4gICAgICBuYW1lOiBTdHJpbmchXG4gICAgICBzaXplOiBJbnQhXG4gICAgICB0eXBlOiBTdHJpbmchXG4gICAgICBkYXRhOiBTdHJpbmchXG4gICAgKTogQ2hhcmFjdGVyXG4gICAgcmVtb3ZlRmlsZShcbiAgICAgIGlkOiBTdHJpbmchXG4gICAgICBmaWxlSWQ6IFN0cmluZyFcbiAgICApOiBDaGFyYWN0ZXJcbiAgfVxuYDtcbmV4cG9ydCBkZWZhdWx0IENoYXJhY3RlcjtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/types/character.ts\n");

/***/ }),

/***/ "./lib/schema/types/file.ts":
/*!**********************************!*\
  !*** ./lib/schema/types/file.ts ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst File = gql `\n  type Query {\n    files(fileInput: FileInput): [File]\n  }\n  type File {\n    id: String\n    name: String\n    size: Int\n    type: String\n    data: String\n  }\n  input FileInput {\n    input: String\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (File);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL2ZpbGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3R5cGVzL2ZpbGUudHM/ZjFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5jb25zdCB7IGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlci1sYW1iZGEnKTtcblxuY29uc3QgRmlsZSA9IGdxbGBcbiAgdHlwZSBRdWVyeSB7XG4gICAgZmlsZXMoZmlsZUlucHV0OiBGaWxlSW5wdXQpOiBbRmlsZV1cbiAgfVxuICB0eXBlIEZpbGUge1xuICAgIGlkOiBTdHJpbmdcbiAgICBuYW1lOiBTdHJpbmdcbiAgICBzaXplOiBJbnRcbiAgICB0eXBlOiBTdHJpbmdcbiAgICBkYXRhOiBTdHJpbmdcbiAgfVxuICBpbnB1dCBGaWxlSW5wdXQge1xuICAgIGlucHV0OiBTdHJpbmdcbiAgfVxuYDtcbmV4cG9ydCBkZWZhdWx0IEZpbGU7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/types/file.ts\n");

/***/ }),

/***/ "./lib/schema/types/idea.ts":
/*!**********************************!*\
  !*** ./lib/schema/types/idea.ts ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst Idea = gql `\n  type Imgs {\n    icon: [String]\n    cover: [String]\n    screenshot: [String]\n    png: [String]\n  }\n  type Idea {\n    id: String\n    label: String\n    category: String\n    platform: String\n    language: String\n    releaseDate: String\n    timeToCompletion: Int\n    requiredAge: Float\n    score: Float\n    userId: String\n    user: User\n    imgs: Imgs\n  }\n  input IdeaInput {\n    label: String\n    category: String\n    requiredAge: Float\n    hasRequiredAge: Boolean\n    score: Float\n    hasScore: Boolean\n    language: String\n    count: Int\n  }\n  type IdeaEdge {\n    total: Int!\n    page: Int!\n    nodes: [Idea]\n  }\n  type Query {\n    ideas(ideaInput: IdeaInput, page: Int, sort: String): IdeaEdge\n  }\n  type Mutation {\n    createIdea(\n      label: String!\n      category: String!\n      platform: String\n    ): Idea\n    updateIdea(\n      id: String!\n      label: String\n      category: String\n      platform: String\n      language: String\n      releaseDate: String\n      timeToCompletion: Int\n      requiredAge: Float\n      score: Float\n    ): Idea\n    deleteIdea(\n      id: String!\n    ): Idea\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Idea);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL2lkZWEudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3R5cGVzL2lkZWEudHM/OTVmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5jb25zdCB7IGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlci1sYW1iZGEnKTtcblxuY29uc3QgSWRlYSA9IGdxbGBcbiAgdHlwZSBJbWdzIHtcbiAgICBpY29uOiBbU3RyaW5nXVxuICAgIGNvdmVyOiBbU3RyaW5nXVxuICAgIHNjcmVlbnNob3Q6IFtTdHJpbmddXG4gICAgcG5nOiBbU3RyaW5nXVxuICB9XG4gIHR5cGUgSWRlYSB7XG4gICAgaWQ6IFN0cmluZ1xuICAgIGxhYmVsOiBTdHJpbmdcbiAgICBjYXRlZ29yeTogU3RyaW5nXG4gICAgcGxhdGZvcm06IFN0cmluZ1xuICAgIGxhbmd1YWdlOiBTdHJpbmdcbiAgICByZWxlYXNlRGF0ZTogU3RyaW5nXG4gICAgdGltZVRvQ29tcGxldGlvbjogSW50XG4gICAgcmVxdWlyZWRBZ2U6IEZsb2F0XG4gICAgc2NvcmU6IEZsb2F0XG4gICAgdXNlcklkOiBTdHJpbmdcbiAgICB1c2VyOiBVc2VyXG4gICAgaW1nczogSW1nc1xuICB9XG4gIGlucHV0IElkZWFJbnB1dCB7XG4gICAgbGFiZWw6IFN0cmluZ1xuICAgIGNhdGVnb3J5OiBTdHJpbmdcbiAgICByZXF1aXJlZEFnZTogRmxvYXRcbiAgICBoYXNSZXF1aXJlZEFnZTogQm9vbGVhblxuICAgIHNjb3JlOiBGbG9hdFxuICAgIGhhc1Njb3JlOiBCb29sZWFuXG4gICAgbGFuZ3VhZ2U6IFN0cmluZ1xuICAgIGNvdW50OiBJbnRcbiAgfVxuICB0eXBlIElkZWFFZGdlIHtcbiAgICB0b3RhbDogSW50IVxuICAgIHBhZ2U6IEludCFcbiAgICBub2RlczogW0lkZWFdXG4gIH1cbiAgdHlwZSBRdWVyeSB7XG4gICAgaWRlYXMoaWRlYUlucHV0OiBJZGVhSW5wdXQsIHBhZ2U6IEludCwgc29ydDogU3RyaW5nKTogSWRlYUVkZ2VcbiAgfVxuICB0eXBlIE11dGF0aW9uIHtcbiAgICBjcmVhdGVJZGVhKFxuICAgICAgbGFiZWw6IFN0cmluZyFcbiAgICAgIGNhdGVnb3J5OiBTdHJpbmchXG4gICAgICBwbGF0Zm9ybTogU3RyaW5nXG4gICAgKTogSWRlYVxuICAgIHVwZGF0ZUlkZWEoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICAgbGFiZWw6IFN0cmluZ1xuICAgICAgY2F0ZWdvcnk6IFN0cmluZ1xuICAgICAgcGxhdGZvcm06IFN0cmluZ1xuICAgICAgbGFuZ3VhZ2U6IFN0cmluZ1xuICAgICAgcmVsZWFzZURhdGU6IFN0cmluZ1xuICAgICAgdGltZVRvQ29tcGxldGlvbjogSW50XG4gICAgICByZXF1aXJlZEFnZTogRmxvYXRcbiAgICAgIHNjb3JlOiBGbG9hdFxuICAgICk6IElkZWFcbiAgICBkZWxldGVJZGVhKFxuICAgICAgaWQ6IFN0cmluZyFcbiAgICApOiBJZGVhXG4gIH1cbmA7XG5leHBvcnQgZGVmYXVsdCBJZGVhO1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTREQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/types/idea.ts\n");

/***/ }),

/***/ "./lib/schema/types/review.ts":
/*!************************************!*\
  !*** ./lib/schema/types/review.ts ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst Review = gql `\n  type Review {\n    id: String\n    requiredAge: Int\n    requiredAgeExplanation: String\n    score: Int\n    scoreExplanation: String\n    ideaId: String\n    userId: String\n    user: User\n  }\n  type Query {\n    reviews(ideaId: String): [Review]\n  }\n  type Mutation {\n    createReview(\n      ideaId: String!\n      requiredAge: Int\n      requiredAgeExplanation: String\n      score: Int\n      scoreExplanation: String\n    ): Review\n    updateReview(\n      id: String!\n      requiredAge: Int\n      requiredAgeExplanation: String\n      score: Int\n      scoreExplanation: String\n    ): Review\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Review);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL3Jldmlldy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zY2hlbWEvdHlwZXMvcmV2aWV3LnRzPzUxYzAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuY29uc3QgeyBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItbGFtYmRhJyk7XG5cbmNvbnN0IFJldmlldyA9IGdxbGBcbiAgdHlwZSBSZXZpZXcge1xuICAgIGlkOiBTdHJpbmdcbiAgICByZXF1aXJlZEFnZTogSW50XG4gICAgcmVxdWlyZWRBZ2VFeHBsYW5hdGlvbjogU3RyaW5nXG4gICAgc2NvcmU6IEludFxuICAgIHNjb3JlRXhwbGFuYXRpb246IFN0cmluZ1xuICAgIGlkZWFJZDogU3RyaW5nXG4gICAgdXNlcklkOiBTdHJpbmdcbiAgICB1c2VyOiBVc2VyXG4gIH1cbiAgdHlwZSBRdWVyeSB7XG4gICAgcmV2aWV3cyhpZGVhSWQ6IFN0cmluZyk6IFtSZXZpZXddXG4gIH1cbiAgdHlwZSBNdXRhdGlvbiB7XG4gICAgY3JlYXRlUmV2aWV3KFxuICAgICAgaWRlYUlkOiBTdHJpbmchXG4gICAgICByZXF1aXJlZEFnZTogSW50XG4gICAgICByZXF1aXJlZEFnZUV4cGxhbmF0aW9uOiBTdHJpbmdcbiAgICAgIHNjb3JlOiBJbnRcbiAgICAgIHNjb3JlRXhwbGFuYXRpb246IFN0cmluZ1xuICAgICk6IFJldmlld1xuICAgIHVwZGF0ZVJldmlldyhcbiAgICAgIGlkOiBTdHJpbmchXG4gICAgICByZXF1aXJlZEFnZTogSW50XG4gICAgICByZXF1aXJlZEFnZUV4cGxhbmF0aW9uOiBTdHJpbmdcbiAgICAgIHNjb3JlOiBJbnRcbiAgICAgIHNjb3JlRXhwbGFuYXRpb246IFN0cmluZ1xuICAgICk6IFJldmlld1xuICB9XG5gO1xuZXhwb3J0IGRlZmF1bHQgUmV2aWV3O1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQThCQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/schema/types/review.ts\n");

/***/ }),

/***/ "./lib/schema/types/sharing.ts":
/*!*************************************!*\
  !*** ./lib/schema/types/sharing.ts ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst Sharing = gql `\n  type Sharing {\n    id: String\n    userId: String\n    sharerId: String\n    user: User\n  }\n  type Query {\n    sharings: [Sharing]\n  }\n  type Mutation {\n    createSharing(\n      userId: String!\n    ): Sharing\n    deleteSharing(\n      id: String!\n    ): Sharing\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Sharing);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL3NoYXJpbmcudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3R5cGVzL3NoYXJpbmcudHM/MDhkOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5jb25zdCB7IGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlci1sYW1iZGEnKTtcblxuY29uc3QgU2hhcmluZyA9IGdxbGBcbiAgdHlwZSBTaGFyaW5nIHtcbiAgICBpZDogU3RyaW5nXG4gICAgdXNlcklkOiBTdHJpbmdcbiAgICBzaGFyZXJJZDogU3RyaW5nXG4gICAgdXNlcjogVXNlclxuICB9XG4gIHR5cGUgUXVlcnkge1xuICAgIHNoYXJpbmdzOiBbU2hhcmluZ11cbiAgfVxuICB0eXBlIE11dGF0aW9uIHtcbiAgICBjcmVhdGVTaGFyaW5nKFxuICAgICAgdXNlcklkOiBTdHJpbmchXG4gICAgKTogU2hhcmluZ1xuICAgIGRlbGV0ZVNoYXJpbmcoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICk6IFNoYXJpbmdcbiAgfVxuYDtcbmV4cG9ydCBkZWZhdWx0IFNoYXJpbmc7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/schema/types/sharing.ts\n");

/***/ }),

/***/ "./lib/schema/types/user.ts":
/*!**********************************!*\
  !*** ./lib/schema/types/user.ts ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst User = gql `\n  type User {\n    id: String\n    firstName: String\n    lastName: String\n    xp: Int\n    lvl: Int\n    nextLvlXp: Int\n  }\n  type Query {\n    users(searchQuery: String!): [User]\n    user(id: String!): User\n    authUser: User\n  }\n  type Mutation {\n    updateUser(\n      id: String!\n      firstName: String\n      lastName: String\n    ): User\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL3VzZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2NoZW1hL3R5cGVzL3VzZXIudHM/YmI3OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5jb25zdCB7IGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlci1sYW1iZGEnKTtcblxuY29uc3QgVXNlciA9IGdxbGBcbiAgdHlwZSBVc2VyIHtcbiAgICBpZDogU3RyaW5nXG4gICAgZmlyc3ROYW1lOiBTdHJpbmdcbiAgICBsYXN0TmFtZTogU3RyaW5nXG4gICAgeHA6IEludFxuICAgIGx2bDogSW50XG4gICAgbmV4dEx2bFhwOiBJbnRcbiAgfVxuICB0eXBlIFF1ZXJ5IHtcbiAgICB1c2VycyhzZWFyY2hRdWVyeTogU3RyaW5nISk6IFtVc2VyXVxuICAgIHVzZXIoaWQ6IFN0cmluZyEpOiBVc2VyXG4gICAgYXV0aFVzZXI6IFVzZXJcbiAgfVxuICB0eXBlIE11dGF0aW9uIHtcbiAgICB1cGRhdGVVc2VyKFxuICAgICAgaWQ6IFN0cmluZyFcbiAgICAgIGZpcnN0TmFtZTogU3RyaW5nXG4gICAgICBsYXN0TmFtZTogU3RyaW5nXG4gICAgKTogVXNlclxuICB9XG5gO1xuZXhwb3J0IGRlZmF1bHQgVXNlcjtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/schema/types/user.ts\n");

/***/ }),

/***/ "./lib/schema/types/world.ts":
/*!***********************************!*\
  !*** ./lib/schema/types/world.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst { gql } = __webpack_require__(/*! apollo-server-lambda */ \"apollo-server-lambda\");\nconst World = gql `\n  type World {\n    id: String\n    label: String\n    characters: [Character]\n  }\n  type WorldEdge {\n    total: Int!\n    page: Int!\n    nodes: [World]\n  }\n  input WorldInput {\n    label: String\n    count: Int\n  }\n  type Query {\n    world(id: String): World\n    worlds(worldInput: WorldInput, page: Int, sort: String): WorldEdge\n  }\n  type Mutation {\n    createWorld(\n      label: String!\n    ): World\n    updateWorld(\n      id: String!\n      label: String\n    ): World\n    deleteWorld(\n      id: String!\n    ): World\n    addCharacter(\n      id: String!\n      characterId: String!\n    ): World\n    removeCharacter(\n      id: String!\n      characterId: String!\n    ): World\n  }\n`;\n/* harmony default export */ __webpack_exports__[\"default\"] = (World);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NoZW1hL3R5cGVzL3dvcmxkLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NjaGVtYS90eXBlcy93b3JsZC50cz8wNjA1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmNvbnN0IHsgZ3FsIH0gPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyLWxhbWJkYScpO1xuXG5jb25zdCBXb3JsZCA9IGdxbGBcbiAgdHlwZSBXb3JsZCB7XG4gICAgaWQ6IFN0cmluZ1xuICAgIGxhYmVsOiBTdHJpbmdcbiAgICBjaGFyYWN0ZXJzOiBbQ2hhcmFjdGVyXVxuICB9XG4gIHR5cGUgV29ybGRFZGdlIHtcbiAgICB0b3RhbDogSW50IVxuICAgIHBhZ2U6IEludCFcbiAgICBub2RlczogW1dvcmxkXVxuICB9XG4gIGlucHV0IFdvcmxkSW5wdXQge1xuICAgIGxhYmVsOiBTdHJpbmdcbiAgICBjb3VudDogSW50XG4gIH1cbiAgdHlwZSBRdWVyeSB7XG4gICAgd29ybGQoaWQ6IFN0cmluZyk6IFdvcmxkXG4gICAgd29ybGRzKHdvcmxkSW5wdXQ6IFdvcmxkSW5wdXQsIHBhZ2U6IEludCwgc29ydDogU3RyaW5nKTogV29ybGRFZGdlXG4gIH1cbiAgdHlwZSBNdXRhdGlvbiB7XG4gICAgY3JlYXRlV29ybGQoXG4gICAgICBsYWJlbDogU3RyaW5nIVxuICAgICk6IFdvcmxkXG4gICAgdXBkYXRlV29ybGQoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICAgbGFiZWw6IFN0cmluZ1xuICAgICk6IFdvcmxkXG4gICAgZGVsZXRlV29ybGQoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICk6IFdvcmxkXG4gICAgYWRkQ2hhcmFjdGVyKFxuICAgICAgaWQ6IFN0cmluZyFcbiAgICAgIGNoYXJhY3RlcklkOiBTdHJpbmchXG4gICAgKTogV29ybGRcbiAgICByZW1vdmVDaGFyYWN0ZXIoXG4gICAgICBpZDogU3RyaW5nIVxuICAgICAgY2hhcmFjdGVySWQ6IFN0cmluZyFcbiAgICApOiBXb3JsZFxuICB9XG5gO1xuZXhwb3J0IGRlZmF1bHQgV29ybGQ7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/schema/types/world.ts\n");

/***/ }),

/***/ "./lib/services/auth.service.ts":
/*!**************************************!*\
  !*** ./lib/services/auth.service.ts ***!
  \**************************************/
/*! exports provided: authService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"authService\", function() { return authService; });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jwks_rsa__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jwks-rsa */ \"jwks-rsa\");\n/* harmony import */ var jwks_rsa__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jwks_rsa__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _config_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.service */ \"./lib/services/config.service.ts\");\n\n\n\nconst childIAMPolicy = (userId, effect, resource, context) => {\n    const policy = {\n        principalId: userId,\n        policyDocument: {\n            Version: '2012-10-17',\n            Statement: [\n                {\n                    Action: 'execute-api:Invoke',\n                    Effect: effect,\n                    Resource: resource,\n                },\n            ],\n        },\n        context,\n    };\n    return policy;\n};\nclass AuthService {\n    authenticateToken(event, callback, tokenValue) {\n        const options = {\n            audience: _config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].auth0ClientId,\n            algorithms: ['RS256']\n        };\n        try {\n            const jwksClient = jwks_rsa__WEBPACK_IMPORTED_MODULE_1___default()({\n                strictSsl: true,\n                cache: true,\n                jwksUri: _config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].auth0JwksUri\n            });\n            return jwksClient.getSigningKey(_config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].auth0JwksKid, (err, key) => {\n                if (err) {\n                    console.error(err);\n                    return callback('Unauthorized');\n                }\n                if (!key) {\n                    console.error('No key found in signing key');\n                    return callback('Unauthorized');\n                }\n                const signingKey = key.publicKey || key.rsaPublicKey || '';\n                Object(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__[\"verify\"])(tokenValue, signingKey, options, (verifyError, decoded) => {\n                    if (verifyError) {\n                        console.error('verifyError', verifyError);\n                        return callback('Unauthorized');\n                    }\n                    return this.authenticateUser(event, callback, decoded.sub);\n                });\n            });\n        }\n        catch (err) {\n            console.error('Invalid token', err);\n            return callback('Unauthorized');\n        }\n    }\n    authenticate(event, callback) {\n        console.log('configService.userId', _config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].userId);\n        if (_config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].userId) {\n            return this.authenticateUser(event, callback, _config_service__WEBPACK_IMPORTED_MODULE_2__[\"configService\"].userId);\n        }\n        if (!event.authorizationToken) {\n            console.error('No authorization token');\n            return callback('Unauthorized');\n        }\n        const tokenParts = event.authorizationToken.split(' ');\n        if (tokenParts.length !== 2) {\n            console.error('Invalid authorization token');\n            return callback('Unauthorized');\n        }\n        const bearerValue = tokenParts[0];\n        const tokenValue = tokenParts[1];\n        if (!(bearerValue.toLowerCase() === 'bearer' && tokenValue)) {\n            console.error('Invalid authorization token bearer');\n            return callback('Unauthorized');\n        }\n        this.authenticateToken(event, callback, tokenValue);\n    }\n    authenticateUser(event, callback, userId) {\n        const effect = 'Allow';\n        const resource = event.methodArn;\n        const authorizerContext = { userId: `User-${userId}` };\n        return callback(null, childIAMPolicy(userId, effect, resource, authorizerContext));\n    }\n}\nconst authService = new AuthService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvYXV0aC5zZXJ2aWNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZpY2VzL2F1dGguc2VydmljZS50cz9kZDZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgandrcyBmcm9tICdqd2tzLXJzYSc7XG5pbXBvcnQgeyBjb25maWdTZXJ2aWNlIH0gZnJvbSAnLi9jb25maWcuc2VydmljZSc7XG5cbi8qKlxuICogUmV0dXJucyBhbiBJQU0gcG9saWN5IGRvY3VtZW50IGZvciBhIGdpdmVuIHVzZXIgYW5kIHJlc291cmNlLlxuICpcbiAqIEBtZXRob2QgY2hpbGRJQU1Qb2xpY3lcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgLSB1c2VyIGlkXG4gKiBAcGFyYW0ge1N0cmluZ30gZWZmZWN0ICAtIEFsbG93IC8gRGVueVxuICogQHBhcmFtIHtTdHJpbmd9IHJlc291cmNlIC0gcmVzb3VyY2UgQVJOXG4gKiBAcGFyYW0ge1N0cmluZ30gY29udGV4dCAtIHJlc3BvbnNlIGNvbnRleHRcbiAqIEByZXR1cm5zIHtPYmplY3R9IHBvbGljeURvY3VtZW50XG4gKi9cbmNvbnN0IGNoaWxkSUFNUG9saWN5ID0gKHVzZXJJZCwgZWZmZWN0LCByZXNvdXJjZSwgY29udGV4dCkgPT4ge1xuICBjb25zdCBwb2xpY3kgPSB7XG4gICAgcHJpbmNpcGFsSWQ6IHVzZXJJZCxcbiAgICBwb2xpY3lEb2N1bWVudDoge1xuICAgICAgVmVyc2lvbjogJzIwMTItMTAtMTcnLFxuICAgICAgU3RhdGVtZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICBBY3Rpb246ICdleGVjdXRlLWFwaTpJbnZva2UnLFxuICAgICAgICAgIEVmZmVjdDogZWZmZWN0LFxuICAgICAgICAgIFJlc291cmNlOiByZXNvdXJjZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBjb250ZXh0LFxuICB9O1xuXG4gIHJldHVybiBwb2xpY3k7XG59O1xuXG5jbGFzcyBBdXRoU2VydmljZSB7XG4gIGF1dGhlbnRpY2F0ZVRva2VuKGV2ZW50OiBhbnksIGNhbGxiYWNrOiBhbnksIHRva2VuVmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IG9wdGlvbnM6IGFueSA9IHtcbiAgICAgIGF1ZGllbmNlOiBjb25maWdTZXJ2aWNlLmF1dGgwQ2xpZW50SWQsXG4gICAgICBhbGdvcml0aG1zOiBbJ1JTMjU2J11cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGp3a3NDbGllbnQgPSBqd2tzKHtcbiAgICAgICAgc3RyaWN0U3NsOiB0cnVlLFxuICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgandrc1VyaTogY29uZmlnU2VydmljZS5hdXRoMEp3a3NVcmlcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGp3a3NDbGllbnQuZ2V0U2lnbmluZ0tleShjb25maWdTZXJ2aWNlLmF1dGgwSndrc0tpZCwgKGVycjogYW55LCBrZXk6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVW5hdXRob3JpemVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBrZXkgZm91bmQgaW4gc2lnbmluZyBrZXknKTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25pbmdLZXkgPSBrZXkucHVibGljS2V5IHx8IGtleS5yc2FQdWJsaWNLZXkgfHwgJyc7XG4gICAgICAgIHZlcmlmeSh0b2tlblZhbHVlLCBzaWduaW5nS2V5LCBvcHRpb25zLCAodmVyaWZ5RXJyb3I6IGFueSwgZGVjb2RlZDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHZlcmlmeUVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCd2ZXJpZnlFcnJvcicsIHZlcmlmeUVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVW5hdXRob3JpemVkJylcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRlVXNlcihldmVudCwgY2FsbGJhY2ssIGRlY29kZWQuc3ViKTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHRva2VuJywgZXJyKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVbmF1dGhvcml6ZWQnKVxuICAgIH1cbiAgfVxuXG4gIGF1dGhlbnRpY2F0ZShldmVudDogYW55LCBjYWxsYmFjazogYW55KSB7XG4gICAgY29uc29sZS5sb2coJ2NvbmZpZ1NlcnZpY2UudXNlcklkJywgY29uZmlnU2VydmljZS51c2VySWQpO1xuICAgIGlmIChjb25maWdTZXJ2aWNlLnVzZXJJZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRlVXNlcihldmVudCwgY2FsbGJhY2ssIGNvbmZpZ1NlcnZpY2UudXNlcklkKTtcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50LmF1dGhvcml6YXRpb25Ub2tlbikge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gYXV0aG9yaXphdGlvbiB0b2tlbicpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVbmF1dGhvcml6ZWQnKVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuUGFydHMgPSBldmVudC5hdXRob3JpemF0aW9uVG9rZW4uc3BsaXQoJyAnKVxuICAgIGlmICh0b2tlblBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBhdXRob3JpemF0aW9uIHRva2VuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2soJ1VuYXV0aG9yaXplZCcpXG4gICAgfVxuXG4gICAgY29uc3QgYmVhcmVyVmFsdWUgPSB0b2tlblBhcnRzWzBdXG4gICAgY29uc3QgdG9rZW5WYWx1ZSA9IHRva2VuUGFydHNbMV1cbiAgICBpZiAoIShiZWFyZXJWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnYmVhcmVyJyAmJiB0b2tlblZhbHVlKSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBhdXRob3JpemF0aW9uIHRva2VuIGJlYXJlcicpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVbmF1dGhvcml6ZWQnKVxuICAgIH1cblxuICAgIHRoaXMuYXV0aGVudGljYXRlVG9rZW4oZXZlbnQsIGNhbGxiYWNrLCB0b2tlblZhbHVlKTtcbiAgfVxuXG4gIGF1dGhlbnRpY2F0ZVVzZXIoZXZlbnQ6IGFueSwgY2FsbGJhY2s6IGFueSwgdXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBlZmZlY3QgPSAnQWxsb3cnXG4gICAgY29uc3QgcmVzb3VyY2UgPSBldmVudC5tZXRob2RBcm5cbiAgICBjb25zdCBhdXRob3JpemVyQ29udGV4dCA9IHsgdXNlcklkOiBgVXNlci0ke3VzZXJJZH1gIH1cbiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgY2hpbGRJQU1Qb2xpY3kodXNlcklkLCBlZmZlY3QsIHJlc291cmNlLCBhdXRob3JpemVyQ29udGV4dCkpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dGhTZXJ2aWNlID0gbmV3IEF1dGhTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/services/auth.service.ts\n");

/***/ }),

/***/ "./lib/services/config.service.ts":
/*!****************************************!*\
  !*** ./lib/services/config.service.ts ***!
  \****************************************/
/*! exports provided: configService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configService\", function() { return configService; });\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! joi */ \"joi\");\n/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_0__);\n\nclass ConfigService {\n    constructor() {\n        if (false) {}\n        this.envConfig = this.validateInput(process.env);\n    }\n    validateInput(envConfig) {\n        const envVarsSchema = joi__WEBPACK_IMPORTED_MODULE_0__[\"object\"]({\n            NODE_ENV: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]()\n                .valid('dev')\n                .default('dev'),\n            AWS_REGION: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]().default('eu-west-1'),\n            ELASTIC_SEARCH_INDEX: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]().default('app'),\n            ELASTIC_SEARCH_HOST: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]().default('http://localhost:9200'),\n            LOCAL_DYNAMODB_HOST: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]().default('localhost'),\n            LOCAL_DYNAMODB_PORT: joi__WEBPACK_IMPORTED_MODULE_0__[\"number\"]().default(4567),\n            LOCAL_DYNAMODB_TABLE: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"]().default('pathofchild-graphql-dev'),\n            AUTH0_CLIENT_ID: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"](),\n            AUTH0_JWKS_URI: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"](),\n            AUTH0_JWKS_KID: joi__WEBPACK_IMPORTED_MODULE_0__[\"string\"](),\n            USER_ID: joi__WEBPACK_IMPORTED_MODULE_0__[\"optional\"](),\n        });\n        const { error, value: validatedEnvConfig } = envVarsSchema.validate(envConfig);\n        if (error) {\n            throw new Error(`Config validation error: ${error.message}`);\n        }\n        return validatedEnvConfig;\n    }\n    get awsRegion() {\n        return String(this.envConfig.AWS_REGION);\n    }\n    get elasticSearchIndex() {\n        return String(this.envConfig.ELASTIC_SEARCH_INDEX);\n    }\n    get elasticSearchHost() {\n        return String(this.envConfig.ELASTIC_SEARCH_HOST);\n    }\n    get localDynamoDBHost() {\n        return String(this.envConfig.LOCAL_DYNAMODB_HOST);\n    }\n    get localDynamoDBPort() {\n        return Number(this.envConfig.LOCAL_DYNAMODB_PORT);\n    }\n    get localDynamoDBTable() {\n        return String(this.envConfig.LOCAL_DYNAMODB_TABLE);\n    }\n    get auth0ClientId() {\n        return String(this.envConfig.AUTH0_CLIENT_ID);\n    }\n    get auth0JwksUri() {\n        return String(this.envConfig.AUTH0_JWKS_URI);\n    }\n    get auth0JwksKid() {\n        return String(this.envConfig.AUTH0_JWKS_KID);\n    }\n    get userId() {\n        return String(this.envConfig.USER_ID);\n    }\n}\nconst configService = new ConfigService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvY29uZmlnLnNlcnZpY2UudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmljZXMvY29uZmlnLnNlcnZpY2UudHM/Mjk1MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgKiBhcyBKb2kgZnJvbSAnam9pJztcblxuZGVjbGFyZSB2YXIgcHJvY2Vzczoge1xuICBlbnY6IEVudkNvbmZpZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVudkNvbmZpZyB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZztcbn1cblxuY2xhc3MgQ29uZmlnU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZW52Q29uZmlnOiBFbnZDb25maWc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZyh7XG4gICAgICAgIHBhdGg6IF9fZGlybmFtZSArICcvLi4vLi4vLmVudi4nICsgcHJvY2Vzcy5lbnYuTk9ERV9FTlZcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmVudkNvbmZpZyA9IHRoaXMudmFsaWRhdGVJbnB1dChwcm9jZXNzLmVudik7XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlcyBhbGwgbmVlZGVkIHZhcmlhYmxlcyBhcmUgc2V0LCBhbmQgcmV0dXJucyB0aGUgdmFsaWRhdGVkIEphdmFTY3JpcHQgb2JqZWN0XG4gICAqIGluY2x1ZGluZyB0aGUgYXBwbGllZCBkZWZhdWx0IHZhbHVlcy5cbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVJbnB1dChlbnZDb25maWc6IEVudkNvbmZpZyk6IEVudkNvbmZpZyB7XG4gICAgY29uc3QgZW52VmFyc1NjaGVtYTogSm9pLk9iamVjdFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgTk9ERV9FTlY6IEpvaS5zdHJpbmcoKVxuICAgICAgICAudmFsaWQoJ2RldicpXG4gICAgICAgIC5kZWZhdWx0KCdkZXYnKSxcbiAgICAgIEFXU19SRUdJT046IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCdldS13ZXN0LTEnKSxcbiAgICAgIEVMQVNUSUNfU0VBUkNIX0lOREVYOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnYXBwJyksXG4gICAgICBFTEFTVElDX1NFQVJDSF9IT1NUOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnaHR0cDovL2xvY2FsaG9zdDo5MjAwJyksXG4gICAgICBMT0NBTF9EWU5BTU9EQl9IT1NUOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnbG9jYWxob3N0JyksXG4gICAgICBMT0NBTF9EWU5BTU9EQl9QT1JUOiBKb2kubnVtYmVyKCkuZGVmYXVsdCg0NTY3KSxcbiAgICAgIExPQ0FMX0RZTkFNT0RCX1RBQkxFOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgncGF0aG9mY2hpbGQtZ3JhcGhxbC1kZXYnKSxcbiAgICAgIEFVVEgwX0NMSUVOVF9JRDogSm9pLnN0cmluZygpLFxuICAgICAgQVVUSDBfSldLU19VUkk6IEpvaS5zdHJpbmcoKSxcbiAgICAgIEFVVEgwX0pXS1NfS0lEOiBKb2kuc3RyaW5nKCksXG4gICAgICBVU0VSX0lEOiBKb2kub3B0aW9uYWwoKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgZXJyb3IsIHZhbHVlOiB2YWxpZGF0ZWRFbnZDb25maWcgfSA9IGVudlZhcnNTY2hlbWEudmFsaWRhdGUoXG4gICAgICBlbnZDb25maWcsXG4gICAgKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlnIHZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRlZEVudkNvbmZpZztcbiAgfVxuXG4gIGdldCBhd3NSZWdpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gU3RyaW5nKHRoaXMuZW52Q29uZmlnLkFXU19SRUdJT04pO1xuICB9XG5cbiAgZ2V0IGVsYXN0aWNTZWFyY2hJbmRleCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5lbnZDb25maWcuRUxBU1RJQ19TRUFSQ0hfSU5ERVgpO1xuICB9XG5cbiAgZ2V0IGVsYXN0aWNTZWFyY2hIb3N0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLmVudkNvbmZpZy5FTEFTVElDX1NFQVJDSF9IT1NUKTtcbiAgfVxuXG4gIGdldCBsb2NhbER5bmFtb0RCSG9zdCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5lbnZDb25maWcuTE9DQUxfRFlOQU1PREJfSE9TVCk7XG4gIH1cblxuICBnZXQgbG9jYWxEeW5hbW9EQlBvcnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMuZW52Q29uZmlnLkxPQ0FMX0RZTkFNT0RCX1BPUlQpO1xuICB9XG5cbiAgZ2V0IGxvY2FsRHluYW1vREJUYWJsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5lbnZDb25maWcuTE9DQUxfRFlOQU1PREJfVEFCTEUpO1xuICB9XG5cbiAgZ2V0IGF1dGgwQ2xpZW50SWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gU3RyaW5nKHRoaXMuZW52Q29uZmlnLkFVVEgwX0NMSUVOVF9JRCk7XG4gIH1cblxuICBnZXQgYXV0aDBKd2tzVXJpKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLmVudkNvbmZpZy5BVVRIMF9KV0tTX1VSSSk7XG4gIH1cblxuICBnZXQgYXV0aDBKd2tzS2lkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLmVudkNvbmZpZy5BVVRIMF9KV0tTX0tJRCk7XG4gIH1cblxuICBnZXQgdXNlcklkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLmVudkNvbmZpZy5VU0VSX0lEKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnU2VydmljZSA9IG5ldyBDb25maWdTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQUdBO0FBQ0EscUJBSUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/services/config.service.ts\n");

/***/ }),

/***/ "./lib/services/dynamo.service.ts":
/*!****************************************!*\
  !*** ./lib/services/dynamo.service.ts ***!
  \****************************************/
/*! exports provided: dynamoService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dynamoService\", function() { return dynamoService; });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bluebird__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bluebird */ \"bluebird\");\n/* harmony import */ var bluebird__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bluebird__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dynamoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dynamoose */ \"dynamoose\");\n/* harmony import */ var dynamoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dynamoose__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _config_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config.service */ \"./lib/services/config.service.ts\");\n\n\n\n\nclass DynamoService {\n    getDynamoose() {\n        const { localDynamoDBHost, localDynamoDBPort, } = _config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"];\n        dynamoose__WEBPACK_IMPORTED_MODULE_2__[\"aws\"].sdk.config.update({\n            region: _config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"].awsRegion,\n        });\n        dynamoose__WEBPACK_IMPORTED_MODULE_2__[\"aws\"].ddb.local(`http://${localDynamoDBHost}:${localDynamoDBPort}`);\n        return dynamoose__WEBPACK_IMPORTED_MODULE_2__;\n    }\n    getAWSDynamo() {\n        const { localDynamoDBHost, localDynamoDBPort, } = _config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"];\n        const serviceConfigOptions = {\n            region: _config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"].awsRegion,\n            endpoint: `http://${localDynamoDBHost}:${localDynamoDBPort}`,\n        };\n        aws_sdk__WEBPACK_IMPORTED_MODULE_0__[\"config\"].setPromisesDependency(bluebird__WEBPACK_IMPORTED_MODULE_1__);\n        aws_sdk__WEBPACK_IMPORTED_MODULE_0__[\"config\"].update(serviceConfigOptions);\n        return new aws_sdk__WEBPACK_IMPORTED_MODULE_0__[\"DynamoDB\"](serviceConfigOptions);\n    }\n    getEntity() {\n        const dynamoose = this.getDynamoose();\n        const Schema = dynamoose.Schema;\n        const EntitySchema = new Schema({\n            id: {\n                type: String,\n            },\n        }, {\n            timestamps: true,\n            saveUnknown: true,\n        });\n        return dynamoose.model(_config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"].localDynamoDBTable, EntitySchema);\n    }\n    persist(entity) {\n        for (const field in entity) {\n            if (entity[field] === null) {\n                delete entity[field];\n            }\n        }\n        return entity.save();\n    }\n    async loadAllItems(type) {\n        const params = {\n            TableName: _config_service__WEBPACK_IMPORTED_MODULE_3__[\"configService\"].localDynamoDBTable,\n        };\n        let scanResults = [];\n        let items;\n        do {\n            items = await this.getAWSDynamo().scan(params).promise();\n            items.Items.forEach((item) => {\n                const document = aws_sdk__WEBPACK_IMPORTED_MODULE_0__[\"DynamoDB\"].Converter.unmarshall(item);\n                if (!type || document.id.startsWith(type)) {\n                    scanResults.push(document);\n                }\n            });\n            params.ExclusiveStartKey = items.LastEvaluatedKey;\n        } while (typeof items.LastEvaluatedKey != \"undefined\");\n        return scanResults;\n    }\n}\nconst dynamoService = new DynamoService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvZHluYW1vLnNlcnZpY2UudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmljZXMvZHluYW1vLnNlcnZpY2UudHM/Yzk5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgKiBhcyBBV1MgZnJvbSAnYXdzLXNkayc7XG5pbXBvcnQgeyBTZXJ2aWNlQ29uZmlndXJhdGlvbk9wdGlvbnMgfSBmcm9tICdhd3Mtc2RrL2xpYi9zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGJsdWViaXJkIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCAqIGFzIGR5bmFtb29zZSBmcm9tICdkeW5hbW9vc2UnO1xuaW1wb3J0IHsgY29uZmlnU2VydmljZSB9IGZyb20gJy4vY29uZmlnLnNlcnZpY2UnO1xuXG5jbGFzcyBEeW5hbW9TZXJ2aWNlIHtcbiAgZ2V0RHluYW1vb3NlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxvY2FsRHluYW1vREJIb3N0LFxuICAgICAgbG9jYWxEeW5hbW9EQlBvcnQsXG4gICAgfSA9IGNvbmZpZ1NlcnZpY2U7XG5cbiAgICBkeW5hbW9vc2UuYXdzLnNkay5jb25maWcudXBkYXRlKHtcbiAgICAgIHJlZ2lvbjogY29uZmlnU2VydmljZS5hd3NSZWdpb24sXG4gICAgfSk7XG4gICAgZHluYW1vb3NlLmF3cy5kZGIubG9jYWwoYGh0dHA6Ly8ke2xvY2FsRHluYW1vREJIb3N0fToke2xvY2FsRHluYW1vREJQb3J0fWApO1xuXG4gICAgcmV0dXJuIGR5bmFtb29zZTtcbiAgfVxuXG4gIGdldEFXU0R5bmFtbygpIHtcbiAgICBjb25zdCB7XG4gICAgICBsb2NhbER5bmFtb0RCSG9zdCxcbiAgICAgIGxvY2FsRHluYW1vREJQb3J0LFxuICAgIH0gPSBjb25maWdTZXJ2aWNlO1xuXG4gICAgY29uc3Qgc2VydmljZUNvbmZpZ09wdGlvbnMgOiBTZXJ2aWNlQ29uZmlndXJhdGlvbk9wdGlvbnMgPSB7XG4gICAgICByZWdpb246IGNvbmZpZ1NlcnZpY2UuYXdzUmVnaW9uLFxuICAgICAgZW5kcG9pbnQ6IGBodHRwOi8vJHtsb2NhbER5bmFtb0RCSG9zdH06JHtsb2NhbER5bmFtb0RCUG9ydH1gLFxuICAgIH07XG5cbiAgICBBV1MuY29uZmlnLnNldFByb21pc2VzRGVwZW5kZW5jeShibHVlYmlyZCk7XG4gICAgQVdTLmNvbmZpZy51cGRhdGUoc2VydmljZUNvbmZpZ09wdGlvbnMpO1xuXG4gICAgcmV0dXJuIG5ldyBBV1MuRHluYW1vREIoc2VydmljZUNvbmZpZ09wdGlvbnMpO1xuICB9XG5cbiAgZ2V0RW50aXR5KCkge1xuICAgIGNvbnN0IGR5bmFtb29zZSA9IHRoaXMuZ2V0RHluYW1vb3NlKCk7XG5cbiAgICBjb25zdCBTY2hlbWEgPSBkeW5hbW9vc2UuU2NoZW1hO1xuXG4gICAgY29uc3QgRW50aXR5U2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgICBpZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB9LFxuICAgIH0sIHtcbiAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICBzYXZlVW5rbm93bjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHJldHVybiBkeW5hbW9vc2UubW9kZWwoY29uZmlnU2VydmljZS5sb2NhbER5bmFtb0RCVGFibGUsIEVudGl0eVNjaGVtYSk7XG4gIH1cblxuICBwZXJzaXN0KGVudGl0eTogYW55KSB7XG4gICAgZm9yIChjb25zdCBmaWVsZCBpbiBlbnRpdHkpIHtcbiAgICAgIGlmIChlbnRpdHlbZmllbGRdID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBlbnRpdHlbZmllbGRdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW50aXR5LnNhdmUoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRBbGxJdGVtcyh0eXBlPzogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnN0IHBhcmFtczogYW55ID0ge1xuICAgICAgVGFibGVOYW1lOiBjb25maWdTZXJ2aWNlLmxvY2FsRHluYW1vREJUYWJsZSxcbiAgICB9O1xuXG4gICAgbGV0IHNjYW5SZXN1bHRzOiBhbnlbXSA9IFtdO1xuICAgIGxldCBpdGVtcztcbiAgICBkbyB7XG4gICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZ2V0QVdTRHluYW1vKCkuc2NhbihwYXJhbXMpLnByb21pc2UoKTtcbiAgICAgIGl0ZW1zLkl0ZW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IEFXUy5EeW5hbW9EQi5Db252ZXJ0ZXIudW5tYXJzaGFsbChpdGVtKTtcbiAgICAgICAgLy8gVE9ETyBRdWVyeSB3aXRoIGJlZ2luX3dpdGggZmlsdGVyIG9uIElEXG4gICAgICAgIGlmICghdHlwZSB8fCBkb2N1bWVudC5pZC5zdGFydHNXaXRoKHR5cGUpKSB7XG4gICAgICAgICAgc2NhblJlc3VsdHMucHVzaChkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcGFyYW1zLkV4Y2x1c2l2ZVN0YXJ0S2V5ID0gaXRlbXMuTGFzdEV2YWx1YXRlZEtleTtcbiAgICB9IHdoaWxlICh0eXBlb2YgaXRlbXMuTGFzdEV2YWx1YXRlZEtleSAhPSBcInVuZGVmaW5lZFwiKTtcblxuICAgIHJldHVybiBzY2FuUmVzdWx0cztcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZHluYW1vU2VydmljZSA9IG5ldyBEeW5hbW9TZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/services/dynamo.service.ts\n");

/***/ }),

/***/ "./lib/services/elasticsearch.service.ts":
/*!***********************************************!*\
  !*** ./lib/services/elasticsearch.service.ts ***!
  \***********************************************/
/*! exports provided: elasticSearchService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"elasticSearchService\", function() { return elasticSearchService; });\n/* harmony import */ var elasticsearch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! elasticsearch */ \"elasticsearch\");\n/* harmony import */ var elasticsearch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(elasticsearch__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.service */ \"./lib/services/config.service.ts\");\n/* harmony import */ var _dynamo_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dynamo.service */ \"./lib/services/dynamo.service.ts\");\n\n\n\nconst ITEMS_PER_PAGE = 10;\nclass ElasticSearchService {\n    constructor() {\n        this.elasticsearchClient = new elasticsearch__WEBPACK_IMPORTED_MODULE_0__[\"Client\"]({\n            hosts: [_config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchHost]\n        });\n    }\n    search(query, sort = {}, size = ITEMS_PER_PAGE, page = 1) {\n        const body = {\n            query,\n            sort,\n        };\n        return this.elasticsearchClient.search({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n            type: '_doc',\n            size,\n            from: (page - 1) * ITEMS_PER_PAGE,\n            body,\n        });\n    }\n    searchOne(query) {\n        const body = {\n            query,\n        };\n        return this.elasticsearchClient.search({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n            type: '_doc',\n            size: 1,\n            body,\n        }).then((items) => {\n            if (items.hits.total.value > 0) {\n                return Object.assign({ id: items.hits.hits[0]._id }, items.hits.hits[0]._source);\n            }\n            return null;\n        });\n    }\n    suggest(type, field, value) {\n        const body = {\n            query: {\n                bool: {\n                    must: [\n                        {\n                            term: {\n                                type: 'idea',\n                            },\n                        },\n                        {\n                            match: {\n                                [field]: value,\n                            },\n                        },\n                    ],\n                },\n            },\n            suggest: {\n                suggestion: {\n                    text: value,\n                    term: {\n                        [field]: value,\n                    }\n                }\n            }\n        };\n        return this.elasticsearchClient.search({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n            type: '_doc',\n            size: 5,\n            body,\n        });\n    }\n    remove(document) {\n        this.elasticsearchClient.delete({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n            type: '_doc',\n            id: document.id,\n        }, (err, resp, status) => {\n            console.log(resp);\n        });\n    }\n    refreshIndex() {\n        return this.elasticsearchClient.indices.refresh();\n    }\n    async index(document) {\n        const id = document.id;\n        const type = id.split('-')[0];\n        return this.elasticsearchClient.index({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n            type: '_doc',\n            id,\n            body: Object.assign(Object.assign({}, document), { type })\n        }, (err, resp, status) => {\n            console.log(resp);\n        });\n    }\n    createIndex() {\n        return this.elasticsearchClient.indices.create({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n        });\n    }\n    deleteIndex() {\n        return this.elasticsearchClient.indices\n            .delete({\n            index: _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"].elasticSearchIndex,\n        })\n            .catch(() => {\n        });\n    }\n    async loadData() {\n        const items = await _dynamo_service__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"].loadAllItems();\n        const promises = [];\n        for (let item of items) {\n            promises.push(this.index(item));\n        }\n        return Promise.all(promises);\n    }\n    async load() {\n        await this.deleteIndex();\n        await this.createIndex();\n        await this.loadData();\n        await this.refreshIndex();\n    }\n    async wipeIndex() {\n        return this.elasticsearchClient.indices.delete({\n            index: \"_all\",\n        }, function (err, res) {\n            if (err) {\n                console.error(err.message);\n            }\n            else {\n                console.log(\"Indexes have been deleted!\", res);\n            }\n        });\n    }\n}\nconst elasticSearchService = new ElasticSearchService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvZWxhc3RpY3NlYXJjaC5zZXJ2aWNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZpY2VzL2VsYXN0aWNzZWFyY2guc2VydmljZS50cz9kYmZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGF0aCBvZiBjaGlsZFxuICpcbiAqIEBhdXRob3IgVGhvbWFzIEJ1bGxpZXIgPHRob21hc2J1bGxpZXJAZ21haWwuY29tPlxuICovXG5cbmltcG9ydCAqIGFzIGVsYXN0aWNzZWFyY2ggZnJvbSAnZWxhc3RpY3NlYXJjaCc7XG5pbXBvcnQgeyBjb25maWdTZXJ2aWNlIH0gZnJvbSAnLi9jb25maWcuc2VydmljZSc7XG5pbXBvcnQgeyBkeW5hbW9TZXJ2aWNlIH0gZnJvbSAnLi9keW5hbW8uc2VydmljZSc7XG5cbmNvbnN0IElURU1TX1BFUl9QQUdFID0gMTA7XG5cbmNsYXNzIEVsYXN0aWNTZWFyY2hTZXJ2aWNlIHtcbiAgZWxhc3RpY3NlYXJjaENsaWVudCA9IG5ldyBlbGFzdGljc2VhcmNoLkNsaWVudCh7XG4gICAgaG9zdHM6IFtjb25maWdTZXJ2aWNlLmVsYXN0aWNTZWFyY2hIb3N0XVxuICB9KTtcblxuICBzZWFyY2gocXVlcnk6IGFueSwgc29ydDogYW55ID0ge30sIHNpemU6IG51bWJlciA9IElURU1TX1BFUl9QQUdFLCBwYWdlOiBudW1iZXIgPSAxKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBib2R5OiBhbnkgPSB7XG4gICAgICBxdWVyeSxcbiAgICAgIHNvcnQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LnNlYXJjaCh7XG4gICAgICBpbmRleDogY29uZmlnU2VydmljZS5lbGFzdGljU2VhcmNoSW5kZXgsXG4gICAgICB0eXBlOiAnX2RvYycsXG4gICAgICBzaXplLFxuICAgICAgZnJvbTogKHBhZ2UgLSAxKSAqIElURU1TX1BFUl9QQUdFLFxuICAgICAgYm9keSxcbiAgICB9KTtcbiAgfVxuXG4gIHNlYXJjaE9uZShxdWVyeTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBib2R5OiBhbnkgPSB7XG4gICAgICBxdWVyeSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmVsYXN0aWNzZWFyY2hDbGllbnQuc2VhcmNoKHtcbiAgICAgIGluZGV4OiBjb25maWdTZXJ2aWNlLmVsYXN0aWNTZWFyY2hJbmRleCxcbiAgICAgIHR5cGU6ICdfZG9jJyxcbiAgICAgIHNpemU6IDEsXG4gICAgICBib2R5LFxuICAgIH0pLnRoZW4oKGl0ZW1zKSA9PiB7XG4gICAgICBpZiAoaXRlbXMuaGl0cy50b3RhbC52YWx1ZSA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogaXRlbXMuaGl0cy5oaXRzWzBdLl9pZCxcbiAgICAgICAgICAuLi5pdGVtcy5oaXRzLmhpdHNbMF0uX3NvdXJjZSxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIHN1Z2dlc3QodHlwZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBib2R5OiBhbnkgPSB7XG4gICAgICBxdWVyeSA6IHtcbiAgICAgICAgYm9vbDoge1xuICAgICAgICAgIG11c3Q6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpZGVhJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgICAgW2ZpZWxkXTogdmFsdWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgc3VnZ2VzdCA6IHtcbiAgICAgICAgc3VnZ2VzdGlvbjoge1xuICAgICAgICAgIHRleHQ6IHZhbHVlLFxuICAgICAgICAgIHRlcm06IHtcbiAgICAgICAgICAgIFtmaWVsZF06IHZhbHVlLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZWxhc3RpY3NlYXJjaENsaWVudC5zZWFyY2goe1xuICAgICAgaW5kZXg6IGNvbmZpZ1NlcnZpY2UuZWxhc3RpY1NlYXJjaEluZGV4LFxuICAgICAgdHlwZTogJ19kb2MnLFxuICAgICAgc2l6ZTogNSxcbiAgICAgIGJvZHksXG4gICAgfSk7XG4gIH1cblxuICByZW1vdmUoZG9jdW1lbnQ6IGFueSkge1xuICAgIHRoaXMuZWxhc3RpY3NlYXJjaENsaWVudC5kZWxldGUoe1xuICAgICAgaW5kZXg6IGNvbmZpZ1NlcnZpY2UuZWxhc3RpY1NlYXJjaEluZGV4LFxuICAgICAgdHlwZTogJ19kb2MnLFxuICAgICAgaWQ6IGRvY3VtZW50LmlkLFxuICAgIH0sIChlcnIsIHJlc3AsIHN0YXR1cykgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgfSk7XG4gIH1cblxuICByZWZyZXNoSW5kZXgoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LmluZGljZXMucmVmcmVzaCgpO1xuICB9XG5cbiAgYXN5bmMgaW5kZXgoZG9jdW1lbnQ6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgaWQgPSBkb2N1bWVudC5pZDtcbiAgICBjb25zdCB0eXBlID0gaWQuc3BsaXQoJy0nKVswXTtcbiAgICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LmluZGV4KHtcbiAgICAgIGluZGV4OiBjb25maWdTZXJ2aWNlLmVsYXN0aWNTZWFyY2hJbmRleCxcbiAgICAgIHR5cGU6ICdfZG9jJyxcbiAgICAgIGlkLFxuICAgICAgYm9keToge1xuICAgICAgICAuLi5kb2N1bWVudCxcbiAgICAgICAgdHlwZSxcbiAgICAgIH1cbiAgICB9LCAoZXJyLCByZXNwLCBzdGF0dXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlSW5kZXgoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LmluZGljZXMuY3JlYXRlKHtcbiAgICAgIGluZGV4OiBjb25maWdTZXJ2aWNlLmVsYXN0aWNTZWFyY2hJbmRleCxcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUluZGV4KCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuZWxhc3RpY3NlYXJjaENsaWVudC5pbmRpY2VzXG4gICAgICAuZGVsZXRlKHtcbiAgICAgICAgaW5kZXg6IGNvbmZpZ1NlcnZpY2UuZWxhc3RpY1NlYXJjaEluZGV4LFxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIElnbm9yZSBlcnJvclxuICAgICAgfSk7XG4gIH1cblxuICAvLyByZWZyZXNoSW5kZXgoKTogUHJvbWlzZTxhbnk+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LmluZGljZXMucmVmcmVzaCgpO1xuICAvLyB9XG5cbiAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBpdGVtczogYW55ID0gYXdhaXQgZHluYW1vU2VydmljZS5sb2FkQWxsSXRlbXMoKTtcbiAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxhbnk+W10gPSBbXTtcbiAgICBmb3IgKGxldCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBwcm9taXNlcy5wdXNoKHRoaXMuaW5kZXgoaXRlbSkpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICB9XG5cbiAgYXN5bmMgbG9hZCgpOiBQcm9taXNlPGFueT4ge1xuICAgIGF3YWl0IHRoaXMuZGVsZXRlSW5kZXgoKTtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUluZGV4KCk7XG4gICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgIGF3YWl0IHRoaXMucmVmcmVzaEluZGV4KCk7XG4gIH1cblxuICBhc3luYyB3aXBlSW5kZXgoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5lbGFzdGljc2VhcmNoQ2xpZW50LmluZGljZXMuZGVsZXRlKFxuICAgICAge1xuICAgICAgICBpbmRleDogXCJfYWxsXCIsXG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkluZGV4ZXMgaGF2ZSBiZWVuIGRlbGV0ZWQhXCIsIHJlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLy8gYXN5bmMgaW5kZXgoZG9jdW1lbnQ6IGFueSk6IFByb21pc2U8YW55PiB7XG4gIC8vICAgY29uc3QgaWQgPSBkb2N1bWVudC5pZDtcbiAgLy8gICBjb25zdCB0eXBlID0gaWQuc3BsaXQoXCItXCIpWzBdO1xuICAvLyAgIGRlbGV0ZSBkb2N1bWVudC5pbWdzO1xuICAvLyAgIHJldHVybiB0aGlzLmVsYXN0aWNzZWFyY2hDbGllbnQuaW5kZXgoXG4gIC8vICAgICB7XG4gIC8vICAgICAgIGluZGV4OiBjb25maWdTZXJ2aWNlLmVsYXN0aWNTZWFyY2hJbmRleCxcbiAgLy8gICAgICAgdHlwZTogXCJfZG9jXCIsXG4gIC8vICAgICAgIGlkLFxuICAvLyAgICAgICBib2R5OiB7XG4gIC8vICAgICAgICAgLi4uZG9jdW1lbnQsXG4gIC8vICAgICAgICAgdHlwZSxcbiAgLy8gICAgICAgfSxcbiAgLy8gICAgIH0sXG4gIC8vICAgICAoZXJyLCByZXNwLCBzdGF0dXMpID0+IHtcbiAgLy8gICAgICAgaWYgKGVycikge1xuICAvLyAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgICAgY29uc29sZS5sb2cocmVzcC5faWQsIHN0YXR1cyk7XG4gIC8vICAgICB9XG4gIC8vICAgKTtcbiAgLy8gfVxufVxuXG5leHBvcnQgY29uc3QgZWxhc3RpY1NlYXJjaFNlcnZpY2UgPSBuZXcgRWxhc3RpY1NlYXJjaFNlcnZpY2UoKTtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBK0tBO0FBN0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXdCQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/services/elasticsearch.service.ts\n");

/***/ }),

/***/ "./lib/services/index.ts":
/*!*******************************!*\
  !*** ./lib/services/index.ts ***!
  \*******************************/
/*! exports provided: authService, configService, dynamoService, elasticSearchService, puppeteerService, s3Service */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth.service */ \"./lib/services/auth.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"authService\", function() { return _auth_service__WEBPACK_IMPORTED_MODULE_0__[\"authService\"]; });\n\n/* harmony import */ var _config_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.service */ \"./lib/services/config.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"configService\", function() { return _config_service__WEBPACK_IMPORTED_MODULE_1__[\"configService\"]; });\n\n/* harmony import */ var _dynamo_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dynamo.service */ \"./lib/services/dynamo.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"dynamoService\", function() { return _dynamo_service__WEBPACK_IMPORTED_MODULE_2__[\"dynamoService\"]; });\n\n/* harmony import */ var _elasticsearch_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./elasticsearch.service */ \"./lib/services/elasticsearch.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"elasticSearchService\", function() { return _elasticsearch_service__WEBPACK_IMPORTED_MODULE_3__[\"elasticSearchService\"]; });\n\n/* harmony import */ var _puppeteer_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./puppeteer.service */ \"./lib/services/puppeteer.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"puppeteerService\", function() { return _puppeteer_service__WEBPACK_IMPORTED_MODULE_4__[\"puppeteerService\"]; });\n\n/* harmony import */ var _s3_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./s3.service */ \"./lib/services/s3.service.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"s3Service\", function() { return _s3_service__WEBPACK_IMPORTED_MODULE_5__[\"s3Service\"]; });\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvaW5kZXgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmljZXMvaW5kZXgudHM/NzljMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2F1dGguc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL2NvbmZpZy5zZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vZHluYW1vLnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9lbGFzdGljc2VhcmNoLnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9wdXBwZXRlZXIuc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL3MzLnNlcnZpY2UnO1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/services/index.ts\n");

/***/ }),

/***/ "./lib/services/puppeteer.service.ts":
/*!*******************************************!*\
  !*** ./lib/services/puppeteer.service.ts ***!
  \*******************************************/
/*! exports provided: puppeteerService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"puppeteerService\", function() { return puppeteerService; });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var puppeteer_extra__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! puppeteer-extra */ \"puppeteer-extra\");\n/* harmony import */ var puppeteer_extra__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(puppeteer_extra__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! puppeteer-extra-plugin-stealth */ \"puppeteer-extra-plugin-stealth\");\n/* harmony import */ var puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction delay(ms) {\n    return new Promise((resolve) => { setTimeout(resolve, ms); });\n}\nclass PuppeteerService {\n    constructor() {\n        puppeteer_extra__WEBPACK_IMPORTED_MODULE_2___default.a.use(puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_3___default()());\n    }\n    purifyInput(input) {\n        return input.replace('&', 'and');\n    }\n    async getBrowser() {\n        return await puppeteer_extra__WEBPACK_IMPORTED_MODULE_2___default.a.launch({\n            headless: true\n        });\n    }\n    async getNewPage(browser) {\n        const page = await browser.newPage();\n        await page.setViewport({\n            width: 1024,\n            height: 1024\n        });\n        return page;\n    }\n    async getOriginalImageUrl(page, imageSelector) {\n        await page.evaluate((sel) => {\n            if (document.querySelector(sel)) {\n                document.querySelector(sel).click();\n            }\n        }, imageSelector);\n        const ORIGINAL_IMAGE_SELECTOR = `#islsp > div:nth-child(3) > div:nth-child(1) > div:nth-child(1) > div:nth-child(3) > div:nth-child(2) > c-wiz > div:nth-child(1) > div:nth-child(1) img`;\n        let src = 'data:';\n        let attempt = 0;\n        while (attempt < 5000) {\n            src = await page.evaluate((sel) => {\n                return document.querySelector(sel) ? document.querySelector(sel).getAttribute('src') : null;\n            }, ORIGINAL_IMAGE_SELECTOR);\n            if (src) {\n                if (src.substring(0, 5) !== 'data:') {\n                    break;\n                }\n            }\n            attempt++;\n        }\n        if (src.substring(0, 5) === 'data:') {\n            return '';\n        }\n        return src;\n    }\n    async fetchImgs(input, limit = 1, getOriginal = false) {\n        const imgs = [];\n        const browser = await this.getBrowser();\n        const page = await this.getNewPage(browser);\n        let url = `https://www.google.com/search?tbm=isch&q=${this.purifyInput(input)}`;\n        if (getOriginal) {\n            url = `${url}&tbs=ic%3Atrans`;\n        }\n        await page.goto(url);\n        for (let i = 0; i < limit; i++) {\n            const imageSelector = `#islrg > div:nth-child(1) > div:nth-child(${i + 1}) > a > div > img`;\n            if (getOriginal) {\n                const originalImageUrl = await this.getOriginalImageUrl(page, imageSelector);\n                if (originalImageUrl) {\n                    imgs.push(originalImageUrl);\n                }\n            }\n            else {\n                const img = await page.evaluate((sel) => {\n                    return document.querySelector(sel) ? document.querySelector(sel).getAttribute('src') : null;\n                }, imageSelector);\n                if (img) {\n                    imgs.push(img);\n                }\n            }\n        }\n        await browser.close();\n        return imgs;\n    }\n    async fetchReleaseDate(input) {\n        const browser = await this.getBrowser();\n        const page = await this.getNewPage(browser);\n        await page.goto(`https://www.google.com/search?q=${this.purifyInput(input)}+release+date`);\n        await delay(1000);\n        const RELEASE_DATE_SELECTOR = `#rso [data-attrid=\"hw:/collection/video_games:published date\"]`;\n        const releaseDate = await page.evaluate((sel) => {\n            return document.querySelector(sel) ? document.querySelector(sel).innerText : null;\n        }, RELEASE_DATE_SELECTOR);\n        await browser.close();\n        return releaseDate ? moment__WEBPACK_IMPORTED_MODULE_1___default()(releaseDate, \"DD MMMM YYYY\").year() : null;\n    }\n    async getFiles(input) {\n        console.log('getFiles', input);\n        const imgs = [];\n        if (!input) {\n            return imgs;\n        }\n        const browser = await this.getBrowser();\n        const page = await this.getNewPage(browser);\n        let url = `https://www.google.com/search?tbm=isch&tbs=ic%3Atrans&q=${this.purifyInput(input)}`;\n        await page.goto(url);\n        for (let i = 0; i < 10; i++) {\n            const imageSelector = `#islrg > div.islrc > div:nth-child(${i + 1}) > a > div > img`;\n            console.log('imageSelector', imageSelector);\n            const originalImageUrl = await this.getOriginalImageUrl(page, imageSelector);\n            if (originalImageUrl) {\n                imgs.push(originalImageUrl);\n            }\n        }\n        await browser.close();\n        return imgs.map((img) => {\n            const id = Object(nanoid__WEBPACK_IMPORTED_MODULE_0__[\"nanoid\"])();\n            const file = {\n                id: `File-${id}`,\n                name: input,\n                data: img,\n                type: 'image/png',\n                size: img.length,\n            };\n            return file;\n        });\n    }\n}\nconst puppeteerService = new PuppeteerService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvcHVwcGV0ZWVyLnNlcnZpY2UudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmljZXMvcHVwcGV0ZWVyLnNlcnZpY2UudHM/OGFhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhdGggb2YgY2hpbGRcbiAqXG4gKiBAYXV0aG9yIFRob21hcyBCdWxsaWVyIDx0aG9tYXNidWxsaWVyQGdtYWlsLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHB1cHBldGVlciBmcm9tICdwdXBwZXRlZXItZXh0cmEnO1xuaW1wb3J0IFN0ZWFsdGhQbHVnaW4gZnJvbSAncHVwcGV0ZWVyLWV4dHJhLXBsdWdpbi1zdGVhbHRoJztcblxuZnVuY3Rpb24gZGVsYXkobXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpIH0pXG59XG5cbmNsYXNzIFB1cHBldGVlclNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBwdXBwZXRlZXIudXNlKFN0ZWFsdGhQbHVnaW4oKSk7XG4gIH1cblxuICBwdXJpZnlJbnB1dChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgnJicsICdhbmQnKTtcbiAgfVxuXG4gIGFzeW5jIGdldEJyb3dzZXIoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgICAgaGVhZGxlc3M6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldE5ld1BhZ2UoYnJvd3NlcjogYW55KSB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh7XG4gICAgICB3aWR0aDogMTAyNCxcbiAgICAgIGhlaWdodDogMTAyNFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhZ2U7XG4gIH1cblxuICBhc3luYyBnZXRPcmlnaW5hbEltYWdlVXJsKHBhZ2U6IGFueSwgaW1hZ2VTZWxlY3Rvcjogc3RyaW5nKSB7XG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZSgoc2VsKSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWwpKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKS5jbGljaygpO1xuICAgICAgfVxuICAgIH0sIGltYWdlU2VsZWN0b3IpO1xuXG4gICAgY29uc3QgT1JJR0lOQUxfSU1BR0VfU0VMRUNUT1IgPSBgI2lzbHNwID4gZGl2Om50aC1jaGlsZCgzKSA+IGRpdjpudGgtY2hpbGQoMSkgPiBkaXY6bnRoLWNoaWxkKDEpID4gZGl2Om50aC1jaGlsZCgzKSA+IGRpdjpudGgtY2hpbGQoMikgPiBjLXdpeiA+IGRpdjpudGgtY2hpbGQoMSkgPiBkaXY6bnRoLWNoaWxkKDEpIGltZ2A7XG4gICAgbGV0IHNyYyA9ICdkYXRhOic7XG4gICAgbGV0IGF0dGVtcHQgPSAwO1xuICAgIHdoaWxlIChhdHRlbXB0IDwgNTAwMClcbiAgICB7XG4gICAgICBzcmMgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKChzZWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKS5nZXRBdHRyaWJ1dGUoJ3NyYycpIDogbnVsbDtcbiAgICAgIH0sIE9SSUdJTkFMX0lNQUdFX1NFTEVDVE9SKTtcbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgaWYgKHNyYy5zdWJzdHJpbmcoMCwgNSkgIT09ICdkYXRhOicpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXR0ZW1wdCsrO1xuICAgIH1cblxuICAgIGlmIChzcmMuc3Vic3RyaW5nKDAsIDUpID09PSAnZGF0YTonKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGFzeW5jIGZldGNoSW1ncyhpbnB1dDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMSwgZ2V0T3JpZ2luYWw6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBpbWdzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgYnJvd3NlciA9IGF3YWl0IHRoaXMuZ2V0QnJvd3NlcigpO1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldE5ld1BhZ2UoYnJvd3Nlcik7XG5cbiAgICBsZXQgdXJsID0gYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3RibT1pc2NoJnE9JHt0aGlzLnB1cmlmeUlucHV0KGlucHV0KX1gO1xuICAgIGlmIChnZXRPcmlnaW5hbCkge1xuICAgICAgdXJsID0gYCR7dXJsfSZ0YnM9aWMlM0F0cmFuc2A7XG4gICAgfVxuXG4gICAgYXdhaXQgcGFnZS5nb3RvKHVybCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbWl0OyBpKyspIHtcbiAgICAgIGNvbnN0IGltYWdlU2VsZWN0b3IgPSBgI2lzbHJnID4gZGl2Om50aC1jaGlsZCgxKSA+IGRpdjpudGgtY2hpbGQoJHtpICsgMX0pID4gYSA+IGRpdiA+IGltZ2A7XG4gICAgICBpZiAoZ2V0T3JpZ2luYWwpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxJbWFnZVVybCA9IGF3YWl0IHRoaXMuZ2V0T3JpZ2luYWxJbWFnZVVybChwYWdlLCBpbWFnZVNlbGVjdG9yKTtcblxuICAgICAgICBpZiAob3JpZ2luYWxJbWFnZVVybCkge1xuICAgICAgICAgIGltZ3MucHVzaChvcmlnaW5hbEltYWdlVXJsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW1nID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoc2VsKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKS5nZXRBdHRyaWJ1dGUoJ3NyYycpIDogbnVsbDtcbiAgICAgICAgfSwgaW1hZ2VTZWxlY3Rvcik7XG5cbiAgICAgICAgaWYgKGltZykge1xuICAgICAgICAgIGltZ3MucHVzaChpbWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuXG4gICAgcmV0dXJuIGltZ3M7XG4gIH1cblxuICBhc3luYyBmZXRjaFJlbGVhc2VEYXRlKGlucHV0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcnxudWxsPiB7XG4gICAgY29uc3QgYnJvd3NlciA9IGF3YWl0IHRoaXMuZ2V0QnJvd3NlcigpO1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldE5ld1BhZ2UoYnJvd3Nlcik7XG5cbiAgICBhd2FpdCBwYWdlLmdvdG8oYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JHt0aGlzLnB1cmlmeUlucHV0KGlucHV0KX0rcmVsZWFzZStkYXRlYCk7XG5cbiAgICBhd2FpdCBkZWxheSgxMDAwKTtcblxuICAgIGNvbnN0IFJFTEVBU0VfREFURV9TRUxFQ1RPUiA9IGAjcnNvIFtkYXRhLWF0dHJpZD1cImh3Oi9jb2xsZWN0aW9uL3ZpZGVvX2dhbWVzOnB1Ymxpc2hlZCBkYXRlXCJdYDtcbiAgICBjb25zdCByZWxlYXNlRGF0ZSA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKHNlbCkgPT4ge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsKS5pbm5lclRleHQgOiBudWxsO1xuICAgIH0sIFJFTEVBU0VfREFURV9TRUxFQ1RPUik7XG5cbiAgICAvLyBhd2FpdCBwYWdlLnNjcmVlbnNob3Qoe3BhdGg6ICdzY3JlZW5zaG90LnBuZyd9KTtcblxuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcblxuICAgIHJldHVybiByZWxlYXNlRGF0ZSA/IG1vbWVudChyZWxlYXNlRGF0ZSwgXCJERCBNTU1NIFlZWVlcIikueWVhcigpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldEZpbGVzKGlucHV0OiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc29sZS5sb2coJ2dldEZpbGVzJywgaW5wdXQpO1xuXG4gICAgY29uc3QgaW1nczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghaW5wdXQpIHtcbiAgICAgIHJldHVybiBpbWdzO1xuICAgIH1cblxuICAgIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCB0aGlzLmdldEJyb3dzZXIoKTtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgdGhpcy5nZXROZXdQYWdlKGJyb3dzZXIpO1xuXG4gICAgbGV0IHVybCA9IGBodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD90Ym09aXNjaCZ0YnM9aWMlM0F0cmFucyZxPSR7dGhpcy5wdXJpZnlJbnB1dChpbnB1dCl9YDtcblxuICAgIGF3YWl0IHBhZ2UuZ290byh1cmwpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBjb25zdCBpbWFnZVNlbGVjdG9yID0gYCNpc2xyZyA+IGRpdi5pc2xyYyA+IGRpdjpudGgtY2hpbGQoJHtpICsgMX0pID4gYSA+IGRpdiA+IGltZ2A7XG4gICAgICBjb25zb2xlLmxvZygnaW1hZ2VTZWxlY3RvcicsIGltYWdlU2VsZWN0b3IpO1xuXG4gICAgICBjb25zdCBvcmlnaW5hbEltYWdlVXJsID0gYXdhaXQgdGhpcy5nZXRPcmlnaW5hbEltYWdlVXJsKHBhZ2UsIGltYWdlU2VsZWN0b3IpO1xuXG4gICAgICBpZiAob3JpZ2luYWxJbWFnZVVybCkge1xuICAgICAgICBpbWdzLnB1c2gob3JpZ2luYWxJbWFnZVVybCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuXG4gICAgcmV0dXJuIGltZ3MubWFwKChpbWc6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgICAgIGNvbnN0IGZpbGU6IGFueSA9IHtcbiAgICAgICAgaWQ6IGBGaWxlLSR7aWR9YCxcbiAgICAgICAgbmFtZTogaW5wdXQsXG4gICAgICAgIGRhdGE6IGltZyxcbiAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgIHNpemU6IGltZy5sZW5ndGgsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gZmlsZTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcHVwcGV0ZWVyU2VydmljZSA9IG5ldyBQdXBwZXRlZXJTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiJBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/services/puppeteer.service.ts\n");

/***/ }),

/***/ "./lib/services/s3.service.ts":
/*!************************************!*\
  !*** ./lib/services/s3.service.ts ***!
  \************************************/
/*! exports provided: s3Service */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"s3Service\", function() { return s3Service; });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n\nclass S3Service {\n    async storeBase64File(path, base64Data) {\n        const s3 = new aws_sdk__WEBPACK_IMPORTED_MODULE_0__[\"S3\"]();\n        const bucket = 'FIXME';\n        const body = new Buffer(base64Data.replace(/^data:image\\/\\w+;base64,/, ''), 'base64');\n        const type = base64Data.split(';')[0].split('/')[1];\n        const key = `${path}.${type}`;\n        return s3.putObject({\n            Bucket: bucket,\n            Key: key,\n            Body: body,\n            ContentEncoding: 'base64',\n            ContentType: `image/${type}`,\n            ACL: 'public-read',\n        })\n            .promise()\n            .then((res) => {\n            return `https://${bucket}.s3.amazonaws.com/${key}`;\n        })\n            .catch((err) => {\n            return null;\n        });\n    }\n}\nconst s3Service = new S3Service();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2VydmljZXMvczMuc2VydmljZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2aWNlcy9zMy5zZXJ2aWNlLnRzP2ZiZTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQYXRoIG9mIGNoaWxkXG4gKlxuICogQGF1dGhvciBUaG9tYXMgQnVsbGllciA8dGhvbWFzYnVsbGllckBnbWFpbC5jb20+XG4gKi9cblxuaW1wb3J0ICogYXMgQVdTIGZyb20gJ2F3cy1zZGsnO1xuXG5jbGFzcyBTM1NlcnZpY2Uge1xuICBhc3luYyBzdG9yZUJhc2U2NEZpbGUocGF0aDogc3RyaW5nLCBiYXNlNjREYXRhOiBhbnkpIHtcbiAgICBjb25zdCBzMyA9IG5ldyBBV1MuUzMoKTtcbiAgICBjb25zdCBidWNrZXQ6IHN0cmluZyA9ICdGSVhNRSc7IC8vIGNvbmZpZ1NlcnZpY2UuczNCdWNrZXQ7XG4gICAgY29uc3QgYm9keTogQnVmZmVyID0gbmV3IEJ1ZmZlcihiYXNlNjREYXRhLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsLywgJycpLCAnYmFzZTY0Jyk7XG4gICAgY29uc3QgdHlwZTogc3RyaW5nID0gYmFzZTY0RGF0YS5zcGxpdCgnOycpWzBdLnNwbGl0KCcvJylbMV07XG4gICAgY29uc3Qga2V5OiBzdHJpbmcgPSBgJHtwYXRofS4ke3R5cGV9YDtcblxuICAgIHJldHVybiBzMy5wdXRPYmplY3Qoe1xuICAgICAgQnVja2V0OiBidWNrZXQsXG4gICAgICBLZXk6IGtleSxcbiAgICAgIEJvZHk6IGJvZHksXG4gICAgICBDb250ZW50RW5jb2Rpbmc6ICdiYXNlNjQnLFxuICAgICAgQ29udGVudFR5cGU6IGBpbWFnZS8ke3R5cGV9YCxcbiAgICAgIEFDTDogJ3B1YmxpYy1yZWFkJyxcbiAgICB9KVxuICAgICAgLnByb21pc2UoKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHtidWNrZXR9LnMzLmFtYXpvbmF3cy5jb20vJHtrZXl9YDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHMzU2VydmljZSA9IG5ldyBTM1NlcnZpY2UoKTtcbiJdLCJtYXBwaW5ncyI6IkFBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/services/s3.service.ts\n");

/***/ }),

/***/ "@graphql-tools/merge":
/*!***************************************!*\
  !*** external "@graphql-tools/merge" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@graphql-tools/merge\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGdyYXBocWwtdG9vbHMvbWVyZ2UuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAZ3JhcGhxbC10b29scy9tZXJnZVwiPzE3ZDciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGdyYXBocWwtdG9vbHMvbWVyZ2VcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@graphql-tools/merge\n");

/***/ }),

/***/ "apollo-server-lambda":
/*!***************************************!*\
  !*** external "apollo-server-lambda" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"apollo-server-lambda\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBvbGxvLXNlcnZlci1sYW1iZGEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJhcG9sbG8tc2VydmVyLWxhbWJkYVwiPzQwYjkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXBvbGxvLXNlcnZlci1sYW1iZGFcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///apollo-server-lambda\n");

/***/ }),

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"aws-sdk\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXdzLXNkay5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImF3cy1zZGtcIj81MTQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImF3cy1zZGtcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aws-sdk\n");

/***/ }),

/***/ "bluebird":
/*!***************************!*\
  !*** external "bluebird" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"bluebird\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmx1ZWJpcmQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJibHVlYmlyZFwiPzJjNmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmx1ZWJpcmRcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///bluebird\n");

/***/ }),

/***/ "dynamoose":
/*!****************************!*\
  !*** external "dynamoose" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"dynamoose\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1vb3NlLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZHluYW1vb3NlXCI/YzBkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkeW5hbW9vc2VcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///dynamoose\n");

/***/ }),

/***/ "elasticsearch":
/*!********************************!*\
  !*** external "elasticsearch" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"elasticsearch\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxhc3RpY3NlYXJjaC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImVsYXN0aWNzZWFyY2hcIj9mMjAwIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImVsYXN0aWNzZWFyY2hcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///elasticsearch\n");

/***/ }),

/***/ "graphql-tools":
/*!********************************!*\
  !*** external "graphql-tools" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"graphql-tools\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhxbC10b29scy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImdyYXBocWwtdG9vbHNcIj8yNGNhIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImdyYXBocWwtdG9vbHNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///graphql-tools\n");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"joi\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam9pLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiam9pXCI/N2U1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJqb2lcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///joi\n");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jsonwebtoken\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNvbndlYnRva2VuLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwianNvbndlYnRva2VuXCI/NjQ5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///jsonwebtoken\n");

/***/ }),

/***/ "jwks-rsa":
/*!***************************!*\
  !*** external "jwks-rsa" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jwks-rsa\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiandrcy1yc2EuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqd2tzLXJzYVwiP2ZlNzEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiandrcy1yc2FcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///jwks-rsa\n");

/***/ }),

/***/ "lodash":
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"lodash\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9kYXNoLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibG9kYXNoXCI/OTdkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///lodash\n");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"moment\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9tZW50LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCI/YmQ3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb21lbnRcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///moment\n");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"nanoid\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmFub2lkLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibmFub2lkXCI/ZjU3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJuYW5vaWRcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///nanoid\n");

/***/ }),

/***/ "puppeteer-extra":
/*!**********************************!*\
  !*** external "puppeteer-extra" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"puppeteer-extra\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVwcGV0ZWVyLWV4dHJhLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicHVwcGV0ZWVyLWV4dHJhXCI/NjQ1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwdXBwZXRlZXItZXh0cmFcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///puppeteer-extra\n");

/***/ }),

/***/ "puppeteer-extra-plugin-stealth":
/*!*************************************************!*\
  !*** external "puppeteer-extra-plugin-stealth" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"puppeteer-extra-plugin-stealth\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVwcGV0ZWVyLWV4dHJhLXBsdWdpbi1zdGVhbHRoLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicHVwcGV0ZWVyLWV4dHJhLXBsdWdpbi1zdGVhbHRoXCI/OWQ4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwdXBwZXRlZXItZXh0cmEtcGx1Z2luLXN0ZWFsdGhcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///puppeteer-extra-plugin-stealth\n");

/***/ })

/******/ })));