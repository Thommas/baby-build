<mat-card fxFlex class="right-card">
  <mat-card-header fxLayoutAlign="space-between center">
    <form [formGroup]="formGroup" fxLayout="column" fxLayoutAlign="start stretch">
      <mat-form-field fxFill appearance="none">
        <input #inputElement fxFill
              matInput
              [placeholder]="this.formGroup.get('label').value && this.formGroup.get('label').value.length !== 0 ? '' : 'Write an idea'"
              formControlName="label"
              (keyup.backspace)="onKey($event)"
              autocomplete="off">
      </mat-form-field>
    </form>
    <div class="language">
      <button mat-button [matMenuTriggerFor]="languageMenu">
        <img *ngIf="this.formGroup.get('language').value !== null"
             [src]="constantsService.getLanguageIconByValue(this.formGroup.get('language').value)" width="24" height="24"/>
        <img *ngIf="this.formGroup.get('language').value === null"
             src="/assets/img/unknown.svg" width="24" height="24"/>
      </button>
      <mat-menu #languageMenu="matMenu">
        <button mat-menu-item *ngFor="let language of constantsService.languages" (click)="selectLanguage(language.value)">
          <mat-icon><img [src]="language.icon" width="24" height="24"/></mat-icon>
          {{ language.label }}
        </button>
      </mat-menu>
    </div>
    <div class="category">
      <button mat-button [matMenuTriggerFor]="categoryMenu">
        <img [src]="constantsService.getCategoryIconByValue(this.formGroup.get('category').value)"
             width="24" height="24"
             [matTooltip]="constantsService.getLabelByValue(this.formGroup.get('category').value, constantsService.categories)"
             matTooltipPosition="above"/>
      </button>
      <mat-menu #categoryMenu="matMenu">
        <button mat-menu-item *ngFor="let category of constantsService.categories" (click)="selectCategory(category.value)">
          <mat-icon><img [src]="category.icon" width="24" height="24"/></mat-icon>
          {{ category.label }}
        </button>
      </mat-menu>
    </div>
    <div class="platform" *ngIf="this.formGroup.get('category').value == 'videogame'">
      <button mat-button [matMenuTriggerFor]="platformMenu">
        <img [src]="constantsService.getPlatformIconByValue(this.formGroup.get('platform').value)"
             width="24" height="24"
             [matTooltip]="constantsService.getLabelByValue(this.formGroup.get('platform').value, constantsService.platforms)"
             matTooltipPosition="above"/>
      </button>
      <mat-menu #platformMenu="matMenu">
        <button mat-menu-item *ngFor="let platform of constantsService.platforms" (click)="selectPlatform(platform.value)">
          <mat-icon><img [src]="platform.icon" width="24" height="24"/></mat-icon>
          {{ platform.label }}
        </button>
      </mat-menu>
    </div>
    <button mat-icon-button (click)="selectIdea()">
      <mat-icon>close</mat-icon>
    </button>
    <button mat-icon-button [matMenuTriggerFor]="actionMenu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #actionMenu="matMenu">
      <button mat-menu-item (click)="deleteIdea()">idea.delete</button>
    </mat-menu>
  </mat-card-header>
  <mat-card-content>
    <div fxFlex fxFill *ngIf="selectedIdea$ | async as selectedIdea" fxLayout="column" fxLayoutAlign="start center">
      <div class="icon" fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="row" fxLayoutAlign="start center" *ngIf="selectedIdea.imgs && selectedIdea.imgs.cover">
          <img *ngFor="let cover of selectedIdea.imgs.cover" [src]="cover"/>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" *ngIf="selectedIdea.imgs && selectedIdea.imgs.screenshot">
          <img *ngFor="let screenshot of selectedIdea.imgs.screenshot" [src]="screenshot"/>
        </div>
      </div>
      <app-review-show-cmp></app-review-show-cmp>
    </div>
  </mat-card-content>
</mat-card>
